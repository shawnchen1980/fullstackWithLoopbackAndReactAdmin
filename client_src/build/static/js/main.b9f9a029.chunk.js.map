{"version":3,"sources":["components/CurrentWordList.js","features/User/state.js","components/Login.js","components/Signup.js","components/Unauthorized.js","route.js","components/UserMenu.js","components/Headroom.js","components/AppBar.js","Layout.js","components/CreatePracticeButton.js","features/Practice/action.js","components/EditableTextField.js","components/BrowseWordbookButton.js","features/Wordbook/action.js","components/MyArrayInput.js","components/ControlledPanel.js","features/Wordbook/state.js","components/Wordbook.js","components/WordMapping.js","components/Practice.js","components/Word.js","components/ErrorBoundary.js","components/ButtonOptions.js","utilities/random.js","components/TestItem.js","components/WordTests.js","DataProvider/storage.js","DataProvider/fetch.js","features/User/saga.js","lang/chinese.js","reducers.js","App.js","utilities/RouteConvert.js","createAdminStore.js","DataProvider/index.js","DataProvider/authProvider.js","serviceWorker.js","index.js"],"names":["MyResource","withRouter","props","react_default","a","createElement","Resource","connect","state","console","log","currentWordbook","Object","assign","name","concat","list","ListGuesser","User_state","previousState","arguments","length","undefined","_ref","type","payload","user","actions","setUser","createAction","lightTheme","palette","secondary","light","main","dark","contrastText","renderInput","_ref$meta","meta","touched","error","inputProps","esm_extends","input","objectWithoutProperties","TextField_default","helperText","fullWidth","Login","login","auth","_this","userLogin","location","nextPathname","_this$props","this","classes","handleSubmit","isLoading","translate","className","Card_default","card","avatar","Avatar_default","icon","Lock_default","onSubmit","hint","form","Field","autoFocus","component","label","disabled","CardActions_default","Button_default","variant","color","button","CircularProgress_default","size","thickness","Notification","Component","EnhancedLogin","compose","reduxForm","validate","values","errors","email","password","admin","loading","objectSpread","userActions","withStyles","theme","display","flexDirection","minHeight","alignItems","justifyContent","background","backgroundRepeat","backgroundSize","minWidth","marginTop","margin","backgroundColor","grey","padding","enhance","LoginWithTheme","core_styles","createMuiTheme","_ref2","push","showNotification","fetch","method","headers","Content-Type","body","JSON","stringify","then","res","status","Error","statusText","catch","e","_this$props2","passRepeat","Signup_EnhancedLogin","page","route","react_router_dom_es","exact","path","Signup","Unauthorized","UserMenu","anchorEl","handleChange","event","checked","setState","handleMenu","currentTarget","handleClose","_this2","children","logout","open","Boolean","Tooltip_default","title","_","IconButton_default","aria-label","aria-owns","aria-haspopup","onClick","core_Menu_default","id","anchorOrigin","vertical","horizontal","transformOrigin","onClose","Children","map","menuItem","cloneElement","React","defaultProps","AccountCircle_default","defaultStyle","position","zIndex","HeadroomCustom","dist_default","style","AppBar","logo","toggleSidebar","userMenu","width","userName","rest","Headroom","AppBar_default","Toolbar_default","disableGutters","toolbar","classNames","menuButton","Menu_default","root","menuButtonIconOpen","menuButtonIconClosed","count","Typography_default","components_UserMenu","locale","i18n","toggleSidebarAction","paddingRight","marginLeft","marginRight","transition","transitions","create","easing","sharp","duration","leavingScreen","transform","flex","textOverflow","whiteSpace","overflow","withWidth","result","pathname","Layout","appBar","MyAppBar","createPractice","data","basePath","bookId","lastAccessed","Date","now","CREATE","resource","onSuccess","notification","level","redirectTo","onFailure","record","EditableTextField","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","read","handleClick","stopPropagation","text","target","value","handleConfirm","_this$props$location","search","renameWordbook","source","_this$props3","match","history","_this$props4","field_TextField","react","onChange","redirectUrl","UPDATE","browseWordbook","api_url","other","pagination","sort","GET_LIST","localStorage","setItem","TextAreaForArray","handleInput","arr","split","v","spelling","openNext","change","connectedInput","ControlledExpansionPanels","expanded","panel","ExpansionPanel_default","ExpansionPanelSummary_default","expandIcon","ExpandMore_default","heading","secondaryHeading","ExpansionPanelDetails_default","ArrayInput","SimpleFormIterator","TextInput","fontSize","typography","pxToRem","flexBasis","flexShrink","Wordbook_state","setWordbook","PostFilter","Filter","alwaysOn","defaultValue","WordbookList","setCurrentWordbook","List","filters","Wordbook_PostFilter","Datagrid","rowClick","components_EditableTextField","WordbookListHoc","fn","WordbookEdit","Edit","TabbedForm","FormTab","ReferenceManyField","reference","Pagination","ReferenceField","ControlledPanel","cardActionStyle","float","WordbookActions","EditButton","components_CreatePracticeButton","components_BrowseWordbookButton","WordbookShow","Show","SimpleShowLayout","WordbookCreate","Create","SimpleForm","filter","PracticeList","DateField","PracticeListHoc","Practice_PracticeList","WordList","dispatch","WordCreate","ErrorBoundary","hasError","info","ButtonOptions","animated","letters","userInput","letter","el","ButtonBase_default","focusRipple","key","image","animate","join","focusVisibleClassName","focusVisible","ref","b","onAnimationEnd","maxWidth","imageSrc","imageRight","imageButton","imageTitle","imageMarked","_image","flexWrap","height","defineProperty","breakpoints","down","& $imageBackdrop","opacity","& $imageMarked","& $imageTitle","border","& $imageRight","transitionDuration","left","right","top","bottom","imageBackdrop","common","black","white","spacing","unit","generateRandomCharArray","char","lchar","toLowerCase","charAt","lv","charCodeAt","arr1","arr2","min","max","val","Math","floor","random","includes","generateNumsArray","String","fromCharCode","TestItem","charIndex","c","mode","onComplete","preState","setTimeout","repeat","components_ButtonOptions","bind","Box","posed","div","inFromRight1","x","from","to","times","inFromRight2","_ref3","_ref4","inFromLeft1","_ref5","_ref6","inFromLeft2","_ref7","_ref8","TestItems","index","swipeToLeft","myPose","switchToL","switchToR","handleToPrev","ids","prevState","handleToNext","components_ErrorBoundary","pose","components_TestItem","WordTestList","_ref9","WordTests_TestItems","storage","expirationSec","Storage","expirationMS","timestamp","getTime","parse","getItem","removeItem","DataProvider_fetch","url","options","authenticated","token","fetchUtils","fetchJson","setUserSaga","regenerator_default","wrap","_context2","prev","next","takeEvery","USER_CHECK","mark","_callee","_context","put","username","stop","_marked","API_URL","dataProvider","chinese","ra","action","delete","show","save","edit","cancel","undo","refresh","add","remove","add_filter","remove_filter","back","bulk_actions","export","boolean","true","false","dashboard","not_found","file","upload_several","upload_single","references","all_missing","many_missing","single_missing","message","yes","no","are_you_sure","about","invalid_form","delete_title","delete_content","bulk_delete_title","bulk_delete_content","navigation","no_results","no_more_results","page_out_of_boundaries","page_out_from_end","page_out_from_begin","page_range_info","page_rows_per_page","user_menu","sign_in","sign_up","sign_up_success","sign_up_failure","sign_in_error","updated","created","deleted","bad_item","item_doesnt_exist","http_error","canceled","data_provider_error","validation","required","minLength","maxLength","minValue","maxValue","number","oneOf","regex","messages","cn","chineseMessages","createAdminStore","combineReducers","adminReducer","i18nReducer","defaultMessages","formReducer","router","routerReducer","userReducer","wordbookReducer","authProvider","_ref$i18nProvider","i18nProvider","defaultI18nProvider","_ref$locale","reducer","saga","rootSaga","all","adminSaga","fork","sagaMiddleware","createSagaMiddleware","store","createStore","USER_LOGOUT","applyMiddleware","formMiddleware","routerMiddleware","window","__REDUX_DEVTOOLS_EXTENSION__","f","run","createHistory","basename","apiUrl","httpClient","params","UPDATE_MANY","Promise","responses","response","json","DELETE_MANY","_convertDataRequestTo","_params$pagination","perPage","_params$sort","field","order","include","query","GET_ONE","GET_MANY","where","or","GET_MANY_REFERENCE","_params$pagination2","_params$sort2","DELETE","convertDataRequestToHTTP","has","total","parseInt","get","pop","convertHTTPResponse","loopbackClient","Headers","Accept","set","loginApiUrl","noAccessPage","AUTH_LOGIN","request","Request","ttl","AUTH_LOGOUT","resolve","AUTH_ERROR","AUTH_CHECK","reject","App","WList","PList","es","Admin","loginPage","appLayout","layout","customRoutes","ShowGuesser","EditGuesser","WTestList","hot","hostname","ReactDOM","render","src_App","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.b9f9a029.chunk.js","sourcesContent":["import React from \"react\";\r\nimport { Resource, ListGuesser, EditGuesser, ShowGuesser } from \"react-admin\";\r\nimport { withRouter } from \"react-router\";\r\nimport { connect } from \"react-redux\";\r\nconst MyResource = withRouter(props => <Resource {...props} />);\r\nconst stateToProps = state => {\r\n  console.log(state.currentWordbook);\r\n  return { currentWordbook: state.currentWordbook };\r\n};\r\nexport default connect(stateToProps)(props => {\r\n  console.log(\"currentwordlist is refreshed!\", props.currentWordbook);\r\n  return !!props.currentWordbook ? (\r\n    <MyResource\r\n      {...props}\r\n      name={`Wordsfrombooks/${props.currentWordbook}/words`}\r\n      list={ListGuesser}\r\n    />\r\n  ) : null;\r\n});\r\n","import { createAction } from \"redux-actions\";\r\nexport const SET_USER = \"SET_USER\";\r\nexport default (previousState = \"\", { type, payload }) => {\r\n  if (type === SET_USER) {\r\n    return payload.user;\r\n  }\r\n  return previousState;\r\n};\r\nexport const actions = {\r\n  setUser: createAction(SET_USER, user => ({\r\n    user\r\n  }))\r\n};\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { propTypes, reduxForm, Field } from \"redux-form\";\r\nimport { connect } from \"react-redux\";\r\nimport compose from \"recompose/compose\";\r\n\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Card from \"@material-ui/core/Card\";\r\nimport CardActions from \"@material-ui/core/CardActions\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport {\r\n  MuiThemeProvider,\r\n  createMuiTheme,\r\n  withStyles\r\n} from \"@material-ui/core/styles\";\r\nimport LockIcon from \"@material-ui/icons/Lock\";\r\n\r\nimport { Notification, translate, userLogin } from \"react-admin\";\r\nimport { actions as userActions } from \"../features/User/state\";\r\n//import { darkTheme, lightTheme } from './themes';\r\nconst darkTheme = {\r\n  palette: {\r\n    type: \"dark\" // Switching the dark mode on is a single property value change.\r\n  }\r\n};\r\n\r\nconst lightTheme = {\r\n  palette: {\r\n    secondary: {\r\n      light: \"#5f5fc4\",\r\n      main: \"#283593\",\r\n      dark: \"#001064\",\r\n      contrastText: \"#fff\"\r\n    }\r\n  }\r\n};\r\nconst styles = theme => ({\r\n  main: {\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    minHeight: \"100vh\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"flex-start\",\r\n    background: \"url(https://source.unsplash.com/random/1600x900)\",\r\n    backgroundRepeat: \"no-repeat\",\r\n    backgroundSize: \"cover\"\r\n  },\r\n  card: {\r\n    minWidth: 300,\r\n    marginTop: \"6em\"\r\n  },\r\n  avatar: {\r\n    margin: \"1em\",\r\n    display: \"flex\",\r\n    justifyContent: \"center\"\r\n  },\r\n  icon: {\r\n    backgroundColor: theme.palette.secondary.main\r\n  },\r\n  hint: {\r\n    marginTop: \"1em\",\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    color: theme.palette.grey[500]\r\n  },\r\n  form: {\r\n    padding: \"0 1em 1em 1em\"\r\n  },\r\n  input: {\r\n    marginTop: \"1em\"\r\n  },\r\n  actions: {\r\n    padding: \"0 1em 1em 1em\"\r\n  }\r\n});\r\n\r\n// see http://redux-form.com/6.4.3/examples/material-ui/\r\nconst renderInput = ({\r\n  meta: { touched, error } = {},\r\n  input: { ...inputProps },\r\n  ...props\r\n}) => (\r\n  <TextField\r\n    error={!!(touched && error)}\r\n    helperText={touched && error}\r\n    {...inputProps}\r\n    {...props}\r\n    fullWidth\r\n  />\r\n);\r\n\r\nclass Login extends Component {\r\n  login = auth => {\r\n    //this.props.setUser(auth.email);\r\n    this.props.userLogin(\r\n      auth,\r\n      this.props.location.state ? this.props.location.state.nextPathname : \"/\"\r\n    );\r\n  };\r\n\r\n  render() {\r\n    const { classes, handleSubmit, isLoading, translate } = this.props;\r\n    return (\r\n      <div className={classes.main}>\r\n        <Card className={classes.card}>\r\n          <div className={classes.avatar}>\r\n            <Avatar className={classes.icon}>\r\n              <LockIcon />\r\n            </Avatar>\r\n          </div>\r\n          <form onSubmit={handleSubmit(this.login)}>\r\n            <div className={classes.hint}>Hint: demo / demo</div>\r\n            <div className={classes.form}>\r\n              <div className={classes.input}>\r\n                <Field\r\n                  autoFocus\r\n                  name=\"email\"\r\n                  component={renderInput}\r\n                  label={translate(\"ra.auth.email\")}\r\n                  disabled={isLoading}\r\n                />\r\n              </div>\r\n              <div className={classes.input}>\r\n                <Field\r\n                  name=\"password\"\r\n                  component={renderInput}\r\n                  label={translate(\"ra.auth.password\")}\r\n                  type=\"password\"\r\n                  disabled={isLoading}\r\n                />\r\n              </div>\r\n            </div>\r\n            <CardActions className={classes.actions}>\r\n              <Button\r\n                variant=\"raised\"\r\n                type=\"submit\"\r\n                color=\"primary\"\r\n                disabled={isLoading}\r\n                className={classes.button}\r\n                fullWidth\r\n              >\r\n                {isLoading && <CircularProgress size={25} thickness={2} />}\r\n                {translate(\"ra.auth.sign_in\")}\r\n              </Button>\r\n            </CardActions>\r\n          </form>\r\n        </Card>\r\n        <Notification />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nLogin.propTypes = {\r\n  ...propTypes,\r\n  authProvider: PropTypes.func,\r\n  classes: PropTypes.object,\r\n  previousRoute: PropTypes.string,\r\n  translate: PropTypes.func.isRequired,\r\n  userLogin: PropTypes.func.isRequired\r\n};\r\n\r\nconst mapStateToProps = state => ({ isLoading: state.admin.loading > 0 });\r\n\r\nconst enhance = compose(\r\n  translate,\r\n  reduxForm({\r\n    form: \"signIn\",\r\n    validate: (values, props) => {\r\n      const errors = {};\r\n      const { translate } = props;\r\n      if (!values.email) {\r\n        errors.email = translate(\"ra.validation.required\");\r\n      }\r\n      if (!values.password) {\r\n        errors.password = translate(\"ra.validation.required\");\r\n      }\r\n      return errors;\r\n    }\r\n  }),\r\n  connect(\r\n    mapStateToProps,\r\n    { userLogin, ...userActions }\r\n  ),\r\n  withStyles(styles)\r\n);\r\n\r\nconst EnhancedLogin = enhance(Login);\r\n\r\n// We need to put the MuiThemeProvider decoration in another component\r\n// Because otherwise the withStyles() HOC used in EnhancedLogin won't get\r\n// the right theme\r\nconst LoginWithTheme = props => (\r\n  <MuiThemeProvider theme={createMuiTheme(lightTheme)}>\r\n    <EnhancedLogin {...props} />\r\n  </MuiThemeProvider>\r\n);\r\n\r\nexport default LoginWithTheme;\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { propTypes, reduxForm, Field } from \"redux-form\";\r\nimport { connect } from \"react-redux\";\r\nimport compose from \"recompose/compose\";\r\n\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Card from \"@material-ui/core/Card\";\r\nimport CardActions from \"@material-ui/core/CardActions\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport {\r\n  MuiThemeProvider,\r\n  createMuiTheme,\r\n  withStyles\r\n} from \"@material-ui/core/styles\";\r\nimport LockIcon from \"@material-ui/icons/Lock\";\r\n\r\nimport {\r\n  Notification,\r\n  translate,\r\n  userLogin,\r\n  showNotification\r\n} from \"react-admin\";\r\nimport { push } from \"react-router-redux\";\r\n\r\n//import { darkTheme, lightTheme } from './themes';\r\nconst darkTheme = {\r\n  palette: {\r\n    type: \"dark\" // Switching the dark mode on is a single property value change.\r\n  }\r\n};\r\n\r\nconst lightTheme = {\r\n  palette: {\r\n    secondary: {\r\n      light: \"#5f5fc4\",\r\n      main: \"#283593\",\r\n      dark: \"#001064\",\r\n      contrastText: \"#fff\"\r\n    }\r\n  }\r\n};\r\nconst styles = theme => ({\r\n  main: {\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    minHeight: \"100vh\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"flex-start\",\r\n    background: \"url(https://source.unsplash.com/random/1600x900)\",\r\n    backgroundRepeat: \"no-repeat\",\r\n    backgroundSize: \"cover\"\r\n  },\r\n  card: {\r\n    minWidth: 300,\r\n    marginTop: \"6em\"\r\n  },\r\n  avatar: {\r\n    margin: \"1em\",\r\n    display: \"flex\",\r\n    justifyContent: \"center\"\r\n  },\r\n  icon: {\r\n    backgroundColor: theme.palette.secondary.main\r\n  },\r\n  hint: {\r\n    marginTop: \"1em\",\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    color: theme.palette.grey[500]\r\n  },\r\n  form: {\r\n    padding: \"0 1em 1em 1em\"\r\n  },\r\n  input: {\r\n    marginTop: \"1em\"\r\n  },\r\n  actions: {\r\n    padding: \"0 1em 1em 1em\"\r\n  }\r\n});\r\n\r\n// see http://redux-form.com/6.4.3/examples/material-ui/\r\nconst renderInput = ({\r\n  meta: { touched, error } = {},\r\n  input: { ...inputProps },\r\n  ...props\r\n}) => (\r\n  <TextField\r\n    error={!!(touched && error)}\r\n    helperText={touched && error}\r\n    {...inputProps}\r\n    {...props}\r\n    fullWidth\r\n  />\r\n);\r\n\r\nclass Login extends Component {\r\n  login = ({ email, password }) => {\r\n    // this.props.userLogin(\r\n    //     auth,\r\n    //     this.props.location.state\r\n    //         ? this.props.location.state.nextPathname\r\n    //         : '/'\r\n    // );\r\n    const { push, showNotification } = this.props;\r\n\r\n    fetch(\"http://localhost:3000/api/Users\", {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\"\r\n      },\r\n      body: JSON.stringify({ email, password })\r\n    })\r\n      .then(res => {\r\n        console.log(res);\r\n        if (res.status >= 400) throw new Error(res.statusText);\r\n        showNotification(\"ra.auth.sign_up_success\");\r\n        push(\"/login\");\r\n      })\r\n      .catch(e => {\r\n        console.log(e);\r\n        showNotification(\"ra.auth.sign_up_failure\");\r\n      });\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      classes,\r\n      handleSubmit,\r\n      isLoading,\r\n      translate,\r\n      push,\r\n      showNotification\r\n    } = this.props;\r\n    return (\r\n      <div className={classes.main}>\r\n        <Card className={classes.card}>\r\n          <div className={classes.avatar}>\r\n            <Avatar className={classes.icon}>\r\n              <LockIcon />\r\n            </Avatar>\r\n          </div>\r\n          <form onSubmit={handleSubmit(this.login)}>\r\n            <div className={classes.hint}>Hint: demo / demo</div>\r\n            <div className={classes.form}>\r\n              <div className={classes.input}>\r\n                <Field\r\n                  autoFocus\r\n                  name=\"email\"\r\n                  component={renderInput}\r\n                  label={translate(\"ra.auth.email\")}\r\n                  disabled={isLoading}\r\n                />\r\n              </div>\r\n              <div className={classes.input}>\r\n                <Field\r\n                  name=\"password\"\r\n                  component={renderInput}\r\n                  label={translate(\"ra.auth.password\")}\r\n                  type=\"password\"\r\n                  disabled={isLoading}\r\n                />\r\n              </div>\r\n              <div className={classes.input}>\r\n                <Field\r\n                  name=\"passRepeat\"\r\n                  component={renderInput}\r\n                  label={translate(\"ra.auth.passRepeat\")}\r\n                  type=\"password\"\r\n                  disabled={isLoading}\r\n                />\r\n              </div>\r\n            </div>\r\n            <CardActions className={classes.actions}>\r\n              <Button\r\n                variant=\"raised\"\r\n                type=\"submit\"\r\n                color=\"primary\"\r\n                disabled={isLoading}\r\n                className={classes.button}\r\n                fullWidth\r\n              >\r\n                {isLoading && <CircularProgress size={25} thickness={2} />}\r\n                {translate(\"ra.auth.sign_up\")}\r\n              </Button>\r\n            </CardActions>\r\n          </form>\r\n        </Card>\r\n        <Notification />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nLogin.propTypes = {\r\n  ...propTypes,\r\n  authProvider: PropTypes.func,\r\n  classes: PropTypes.object,\r\n  previousRoute: PropTypes.string,\r\n  translate: PropTypes.func.isRequired,\r\n  userLogin: PropTypes.func.isRequired\r\n};\r\n\r\nconst mapStateToProps = state => ({ isLoading: state.admin.loading > 0 });\r\n\r\nconst enhance = compose(\r\n  translate,\r\n  reduxForm({\r\n    form: \"signUp\",\r\n    validate: (values, props) => {\r\n      const errors = {};\r\n      const { translate } = props;\r\n      if (!values.email) {\r\n        errors.email = translate(\"ra.validation.required\");\r\n      }\r\n      if (values.password !== values.passRepeat) {\r\n        errors.password = translate(\"ra.validation.passRepeat\");\r\n      }\r\n      if (!values.password) {\r\n        errors.password = translate(\"ra.validation.required\");\r\n      }\r\n      return errors;\r\n    }\r\n  }),\r\n  connect(\r\n    mapStateToProps,\r\n    { userLogin, push, showNotification }\r\n  ),\r\n  withStyles(styles)\r\n);\r\n\r\nconst EnhancedLogin = enhance(Login);\r\n\r\n// We need to put the MuiThemeProvider decoration in another component\r\n// Because otherwise the withStyles() HOC used in EnhancedLogin won't get\r\n// the right theme\r\nconst LoginWithTheme = props => (\r\n  <MuiThemeProvider theme={createMuiTheme(lightTheme)}>\r\n    <EnhancedLogin {...props} />\r\n  </MuiThemeProvider>\r\n);\r\n\r\nexport default LoginWithTheme;\r\n","import React from \"react\";\r\nconst page = () => <div>Unauthorized user!!</div>;\r\nexport default page;\r\n","import React from \"react\";\r\nimport { Route } from \"react-router-dom\";\r\nimport Signup from \"./components/Signup\";\r\nimport Unauthorized from \"./components/Unauthorized\";\r\n// import Segments from './segments/Segments';\r\n\r\nexport default [\r\n  <Route exact path=\"/signup\" component={Signup} />,\r\n  <Route exact path=\"/unauthorized\" component={Unauthorized} />\r\n];\r\n","import React, { Children, cloneElement } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Menu from \"@material-ui/core/Menu\";\r\nimport AccountCircle from \"@material-ui/icons/AccountCircle\";\r\nimport { translate } from \"ra-core\";\r\n\r\nclass UserMenu extends React.Component {\r\n  static propTypes = {\r\n    children: PropTypes.node,\r\n    label: PropTypes.string.isRequired,\r\n    logout: PropTypes.node,\r\n    icon: PropTypes.node,\r\n    translate: PropTypes.func.isRequired\r\n  };\r\n\r\n  static defaultProps = {\r\n    label: \"ra.auth.user_menu\",\r\n    icon: <AccountCircle />\r\n  };\r\n\r\n  state = {\r\n    auth: true,\r\n    anchorEl: null\r\n  };\r\n\r\n  handleChange = (event, checked) => {\r\n    this.setState({ auth: checked });\r\n  };\r\n\r\n  handleMenu = event => {\r\n    this.setState({ anchorEl: event.currentTarget });\r\n  };\r\n\r\n  handleClose = () => {\r\n    this.setState({ anchorEl: null });\r\n  };\r\n\r\n  render() {\r\n    const { children, label, icon, logout, translate } = this.props;\r\n    if (!logout && !children) return null;\r\n    const { anchorEl } = this.state;\r\n    const open = Boolean(anchorEl);\r\n\r\n    return (\r\n      <div>\r\n        <Tooltip title={label && translate(label, { _: label })}>\r\n          <IconButton\r\n            aria-label={label && translate(label, { _: label })}\r\n            aria-owns={open ? \"menu-appbar\" : null}\r\n            aria-haspopup={true}\r\n            color=\"inherit\"\r\n            onClick={this.handleMenu}\r\n          >\r\n            {icon}\r\n          </IconButton>\r\n        </Tooltip>\r\n        <Menu\r\n          id=\"menu-appbar\"\r\n          anchorEl={anchorEl}\r\n          anchorOrigin={{\r\n            vertical: \"top\",\r\n            horizontal: \"right\"\r\n          }}\r\n          transformOrigin={{\r\n            vertical: \"top\",\r\n            horizontal: \"right\"\r\n          }}\r\n          open={open}\r\n          onClose={this.handleClose}\r\n        >\r\n          {Children.map(children, menuItem =>\r\n            cloneElement(menuItem, { onClick: this.handleClose })\r\n          )}\r\n          {logout}\r\n        </Menu>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default translate(UserMenu);\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport Headroom from \"react-headroom\";\r\n\r\nconst defaultStyle = {\r\n  position: \"fixed\",\r\n  zIndex: 1300\r\n};\r\n\r\nconst HeadroomCustom = ({ children }) => (\r\n  <Headroom style={defaultStyle}>{children}</Headroom>\r\n);\r\n\r\nHeadroomCustom.propTypes = {\r\n  children: PropTypes.node.isRequired\r\n};\r\n\r\nexport default HeadroomCustom;\r\n","import React, { Children, cloneElement } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { connect } from \"react-redux\";\r\nimport classNames from \"classnames\";\r\nimport MuiAppBar from \"@material-ui/core/AppBar\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\nimport MenuIcon from \"@material-ui/icons/Menu\";\r\nimport withWidth from \"@material-ui/core/withWidth\";\r\nimport compose from \"recompose/compose\";\r\nimport { toggleSidebar as toggleSidebarAction } from \"ra-core\";\r\n\r\n//import LoadingIndicator from './LoadingIndicator';\r\nimport UserMenu from \"./UserMenu\";\r\nimport Headroom from \"./Headroom\";\r\n\r\nconst styles = theme => ({\r\n  toolbar: {\r\n    paddingRight: 24\r\n  },\r\n  menuButton: {\r\n    marginLeft: \"0.5em\",\r\n    marginRight: \"0.5em\"\r\n  },\r\n  menuButtonIconClosed: {\r\n    transition: theme.transitions.create([\"transform\"], {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.leavingScreen\r\n    }),\r\n    transform: \"rotate(0deg)\"\r\n  },\r\n  menuButtonIconOpen: {\r\n    transition: theme.transitions.create([\"transform\"], {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.leavingScreen\r\n    }),\r\n    transform: \"rotate(180deg)\"\r\n  },\r\n  title: {\r\n    flex: 1,\r\n    textOverflow: \"ellipsis\",\r\n    whiteSpace: \"nowrap\",\r\n    overflow: \"hidden\"\r\n  }\r\n});\r\n\r\nconst AppBar = ({\r\n  children,\r\n  classes,\r\n  className,\r\n  logo,\r\n  logout,\r\n  open,\r\n  title,\r\n  toggleSidebar,\r\n  userMenu,\r\n  width,\r\n  userName,\r\n  ...rest\r\n}) => (\r\n  <Headroom>\r\n    <MuiAppBar\r\n      className={className}\r\n      color=\"secondary\"\r\n      position=\"static\"\r\n      {...rest}\r\n    >\r\n      <Toolbar\r\n        disableGutters\r\n        variant={width === \"xs\" ? \"regular\" : \"dense\"}\r\n        className={classes.toolbar}\r\n      >\r\n        <IconButton\r\n          color=\"inherit\"\r\n          aria-label=\"open drawer\"\r\n          onClick={toggleSidebar}\r\n          className={classNames(classes.menuButton)}\r\n        >\r\n          <MenuIcon\r\n            classes={{\r\n              root: open\r\n                ? classes.menuButtonIconOpen\r\n                : classes.menuButtonIconClosed\r\n            }}\r\n          />\r\n        </IconButton>\r\n        {Children.count(children) === 0 ? (\r\n          <Typography\r\n            variant=\"title\"\r\n            color=\"inherit\"\r\n            className={classes.title}\r\n            id=\"react-admin-title\"\r\n          />\r\n        ) : (\r\n          children\r\n        )}\r\n        {/* <LoadingIndicator /> */}\r\n        <span>{userName}</span>\r\n        {cloneElement(userMenu, { logout })}\r\n      </Toolbar>\r\n    </MuiAppBar>\r\n  </Headroom>\r\n);\r\n\r\nAppBar.propTypes = {\r\n  children: PropTypes.node,\r\n  classes: PropTypes.object,\r\n  className: PropTypes.string,\r\n  logout: PropTypes.element,\r\n  open: PropTypes.bool,\r\n  title: PropTypes.oneOfType([PropTypes.string, PropTypes.element]).isRequired,\r\n  toggleSidebar: PropTypes.func.isRequired,\r\n  userMenu: PropTypes.node,\r\n  width: PropTypes.string,\r\n  userName: PropTypes.string\r\n};\r\n\r\nAppBar.defaultProps = {\r\n  userMenu: <UserMenu />\r\n};\r\n\r\nconst enhance = compose(\r\n  connect(\r\n    state => ({\r\n      locale: state.i18n.locale, // force redraw on locale change,\r\n      userName: state.user\r\n    }),\r\n    {\r\n      toggleSidebar: toggleSidebarAction\r\n    }\r\n  ),\r\n  withStyles(styles),\r\n  withWidth()\r\n);\r\n\r\nexport default enhance(AppBar);\r\n","// in src/MyLayout.js\r\nimport React from \"react\";\r\nimport { Layout } from \"react-admin\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport MyAppBar from \"./components/AppBar\";\r\n// import MyMenu from './MyMenu';\r\n// import MyNotification from './MyNotification';\r\n\r\nconst MyLayout = props => {\r\n  console.log(props);\r\n  let result;\r\n  if (\r\n    props.location.pathname === \"/signup\" ||\r\n    props.location.pathname === \"/Wordbooks\"\r\n  )\r\n    result = props.children;\r\n  else\r\n    result = (\r\n      <Layout\r\n        {...props}\r\n        appBar={MyAppBar}\r\n        // notification={MyNotification}\r\n      />\r\n    );\r\n  console.log(result);\r\n  return result;\r\n};\r\n\r\nexport default withRouter(MyLayout);\r\n","import React from \"react\";\nimport Button from \"@material-ui/core/Button\";\nimport { createPractice } from \"../features/Practice/action\";\nimport { connect } from \"react-redux\";\nconst CreatePracticeButton = ({ createPractice, record, basePath }) => (\n  <Button\n    color=\"primary\"\n    onClick={() => {\n      console.log(record);\n      console.log(createPractice);\n      //   console.log(actions);\n      createPractice(record, basePath);\n    }}\n  >\n    创建练习\n  </Button>\n);\n\nexport default connect(\n  null,\n  { createPractice }\n)(CreatePracticeButton);\n","// in src/features/Practice/action.js\nimport { CREATE } from \"react-admin\";\nimport { createAction } from \"redux-actions\";\n\nexport const PRACTICE_CREATE = \"PRACTICE_CREATE\";\n// export const commentApprove = (id, data, basePath) => ({\n//   type: COMMENT_APPROVE,\n//   payload: { id, data: { bookId:data.id, lastAccessed: Date.now() } },\n//   meta: { fetch: UPDATE, resource: \"comments\" }\n// });\n// export const actions = {\n//   createPractice: createAction(PRACTICE_CREATE, (data, basePath) => ({\n//     payload: { data: { bookId: data.id, lastAccessed: Date.now() } },\n//     meta: { fetch: CREATE, resource: \"appusers/me/practices\" }\n//   }))\n// };\n\nexport const createPractice = (data, basePath) => ({\n  type: PRACTICE_CREATE,\n  payload: { data: { bookId: data.id, lastAccessed: Date.now() } },\n  meta: {\n    fetch: CREATE,\n    resource: \"appusers/me/practices\",\n    onSuccess: {\n      notification: {\n        body: \"resources.comments.notification.approved_success\",\n        level: \"info\"\n      },\n      redirectTo: `/testsfrombooks/${data.id}/words`,\n      basePath\n    },\n    onFailure: {\n      notification: {\n        body: \"resources.comments.notification.approved_failure\",\n        level: \"warning\"\n      }\n    }\n  }\n});\n","import React, { Component, Fragment } from \"react\";\r\nimport { withRouter } from \"react-router\";\r\nimport { TextField, UPDATE } from \"react-admin\";\r\nimport { connect } from \"react-redux\";\r\nconst WORDBOOK_RENAME = \"WORDBOOK_RENAME\";\r\nexport const renameWordbook = (data, basePath, redirectUrl) => ({\r\n  type: WORDBOOK_RENAME,\r\n  payload: data,\r\n  meta: {\r\n    fetch: UPDATE,\r\n    resource: \"Wordbooks\",\r\n    onSuccess: {\r\n      notification: {\r\n        body: \"resources.comments.notification.approved_success\",\r\n        level: \"info\"\r\n      },\r\n      redirectTo: redirectUrl,\r\n      basePath\r\n    },\r\n    onFailure: {\r\n      notification: {\r\n        body: \"resources.comments.notification.approved_failure\",\r\n        level: \"warning\"\r\n      }\r\n    }\r\n  }\r\n});\r\n\r\nclass EditableTextField extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    const { source, record } = this.props;\r\n    this.state = { read: true, text: record[source] };\r\n  }\r\n  state = { read: true };\r\n  handleClick = e => {\r\n    e.stopPropagation();\r\n    this.setState({ read: !this.state.read });\r\n  };\r\n  handleChange = e => {\r\n    this.setState({ text: e.target.value });\r\n  };\r\n  handleConfirm = e => {\r\n    const {\r\n      location: { pathname, search },\r\n      basePath,\r\n      renameWordbook,\r\n      source,\r\n      record\r\n    } = this.props;\r\n    console.log(\"record\", record);\r\n    renameWordbook(\r\n      { data: { ...record, name: this.state.text }, id: record.id },\r\n      basePath,\r\n      pathname + search\r\n    );\r\n  };\r\n  render() {\r\n    const { source, record, location, match, history, basePath } = this.props;\r\n    console.log(\"editable\", location, match, history, basePath);\r\n    const { renameWordbook, ...others } = this.props;\r\n    return (\r\n      <div\r\n        onClick={e => {\r\n          e.stopPropagation();\r\n        }}\r\n      >\r\n        {this.state.read ? (\r\n          <TextField source={source} record={record} />\r\n        ) : (\r\n          <Fragment>\r\n            <input onChange={this.handleChange} value={this.state.text} />\r\n            <button onClick={this.handleConfirm}>confirm</button>\r\n          </Fragment>\r\n        )}\r\n        <button onClick={this.handleClick}>change</button>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default withRouter(\r\n  connect(\r\n    null,\r\n    { renameWordbook }\r\n  )(EditableTextField)\r\n);\r\n","import React from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport { browseWordbook } from \"../features/Wordbook/action\";\r\nimport { connect } from \"react-redux\";\r\nconst BrowseWordbookButton = ({ browseWordbook, record, basePath }) => (\r\n  <Button\r\n    color=\"primary\"\r\n    onClick={() => {\r\n      console.log(record);\r\n      console.log(browseWordbook);\r\n      localStorage.setItem(\"api_url\", `wordbooks/${record.id}/words`);\r\n      //   console.log(actions);\r\n      browseWordbook(record, basePath);\r\n    }}\r\n  >\r\n    查看词条\r\n  </Button>\r\n);\r\n\r\nexport default connect(\r\n  null,\r\n  { browseWordbook }\r\n)(BrowseWordbookButton);\r\n","// in src/features/Wordbook/action.js\r\nimport { GET_LIST } from \"react-admin\";\r\n\r\nexport const BROWSE_WORDBOOK = \"BROWSE_WORDBOOK\";\r\nexport const browseWordbook = (data, basePath) => ({\r\n  type: BROWSE_WORDBOOK,\r\n  payload: {\r\n    api_url: `wordbooks/${data.id}/words`,\r\n    other: { bookId: data.id, lastAccessed: Date.now() },\r\n    pagination: {},\r\n    sort: {}\r\n  },\r\n  meta: {\r\n    fetch: GET_LIST,\r\n    resource: \"Words\",\r\n    onSuccess: {\r\n      notification: {\r\n        body: \"resources.comments.notification.approved_success\",\r\n        level: \"info\"\r\n      },\r\n      redirectTo: `/words`,\r\n      basePath\r\n    },\r\n    onFailure: {\r\n      notification: {\r\n        body: \"resources.comments.notification.approved_failure\",\r\n        level: \"warning\"\r\n      }\r\n    }\r\n  }\r\n});\r\n","import React, { Component, Fragment } from \"react\";\r\nimport { Field, change } from \"redux-form\";\r\nimport { connect } from \"react-redux\";\r\nimport {\r\n  ArrayInput,\r\n  SimpleFormIterator,\r\n  TextInput,\r\n  FormDataConsumer\r\n} from \"react-admin\";\r\nclass TextAreaForArray extends Component {\r\n  state = { text: \"\" };\r\n  handleInput = () => {\r\n    const arr = this.state.text.split(\"/\").map(v => ({ spelling: v }));\r\n    const { openNext } = this.props;\r\n    console.log(arr);\r\n    console.log(this.props);\r\n    this.props.change(this.props.meta.form, this.props.input.name, arr);\r\n    openNext();\r\n  };\r\n  handleChange = e => {\r\n    this.setState({ text: e.target.value });\r\n  };\r\n  render() {\r\n    return (\r\n      <Fragment>\r\n        <textarea value={this.state.text} onChange={this.handleChange} />\r\n        <button type=\"button\" onClick={() => this.handleInput()}>\r\n          output\r\n        </button>\r\n      </Fragment>\r\n    );\r\n  }\r\n}\r\nexport const connectedInput = connect(\r\n  null,\r\n  { change }\r\n)(TextAreaForArray);\r\nclass MyArrayInput extends Component {\r\n  render() {\r\n    const { source, innerSource, record } = this.props;\r\n    return (\r\n      <Fragment>\r\n        <ArrayInput source={source}>\r\n          <SimpleFormIterator>\r\n            <TextInput source={innerSource} />\r\n          </SimpleFormIterator>\r\n        </ArrayInput>\r\n\r\n        <Field name={source} component={connectedInput} />\r\n      </Fragment>\r\n    );\r\n  }\r\n}\r\nexport default MyArrayInput;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\nimport ExpansionPanel from \"@material-ui/core/ExpansionPanel\";\r\nimport ExpansionPanelDetails from \"@material-ui/core/ExpansionPanelDetails\";\r\nimport ExpansionPanelSummary from \"@material-ui/core/ExpansionPanelSummary\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\r\nimport { connectedInput } from \"./MyArrayInput\";\r\nimport { Field } from \"redux-form\";\r\n\r\nimport {\r\n  ArrayInput,\r\n  SimpleFormIterator,\r\n  TextInput,\r\n  FormDataConsumer\r\n} from \"react-admin\";\r\nconst styles = theme => ({\r\n  root: {\r\n    width: \"100%\",\r\n    marginTop: 50\r\n  },\r\n  heading: {\r\n    fontSize: theme.typography.pxToRem(15),\r\n    flexBasis: \"33.33%\",\r\n    flexShrink: 0\r\n  },\r\n  secondaryHeading: {\r\n    fontSize: theme.typography.pxToRem(15),\r\n    color: theme.palette.text.secondary\r\n  }\r\n});\r\n\r\nclass ControlledExpansionPanels extends React.Component {\r\n  state = {\r\n    expanded: null\r\n  };\r\n\r\n  handleChange = panel => (event, expanded) => {\r\n    this.setState({\r\n      expanded: expanded ? panel : false\r\n    });\r\n  };\r\n  openNext = () => {\r\n    this.setState({\r\n      expanded: \"panel2\"\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const { classes, source } = this.props;\r\n    const { expanded } = this.state;\r\n\r\n    return (\r\n      <div className={classes.root}>\r\n        <ExpansionPanel\r\n          expanded={expanded === \"panel1\"}\r\n          onChange={this.handleChange(\"panel1\")}\r\n        >\r\n          <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\r\n            <Typography className={classes.heading}>快捷输入</Typography>\r\n            <Typography className={classes.secondaryHeading}>\r\n              利用文本框快速输入大量单词，单词之间用分隔符分割，输入完成后按导入按钮\r\n            </Typography>\r\n          </ExpansionPanelSummary>\r\n          <ExpansionPanelDetails>\r\n            <Field\r\n              name={source}\r\n              component={connectedInput}\r\n              openNext={this.openNext}\r\n            />\r\n          </ExpansionPanelDetails>\r\n        </ExpansionPanel>\r\n        <ExpansionPanel\r\n          expanded={expanded === \"panel2\"}\r\n          onChange={this.handleChange(\"panel2\")}\r\n        >\r\n          <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\r\n            <Typography className={classes.heading}>输入校验</Typography>\r\n            <Typography className={classes.secondaryHeading}>\r\n              正式导入前进行数据检查，无误后保存\r\n            </Typography>\r\n          </ExpansionPanelSummary>\r\n          <ExpansionPanelDetails>\r\n            <ArrayInput source={source}>\r\n              <SimpleFormIterator>\r\n                <TextInput source=\"spelling\" />\r\n              </SimpleFormIterator>\r\n            </ArrayInput>\r\n          </ExpansionPanelDetails>\r\n        </ExpansionPanel>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nControlledExpansionPanels.propTypes = {\r\n  classes: PropTypes.object.isRequired\r\n};\r\n\r\nexport default withStyles(styles)(ControlledExpansionPanels);\r\n","import { createAction } from \"redux-actions\";\r\nexport const SET_WORDBOOK = \"SET_WORDBOOK\";\r\nexport default (previousState = \"\", { type, payload }) => {\r\n  if (type === SET_WORDBOOK) {\r\n    return payload.currentWordbook;\r\n  }\r\n  return previousState;\r\n};\r\nexport const actions = {\r\n  setWordbook: createAction(SET_WORDBOOK, currentWordbook => ({\r\n    currentWordbook\r\n  }))\r\n};\r\n","import React from \"react\";\r\nimport CardActions from \"@material-ui/core/CardActions\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport CreatePracticeButton from \"./CreatePracticeButton\";\r\nimport EditableTextField from \"./EditableTextField\";\r\nimport BrowseWordbookButton from \"./BrowseWordbookButton\";\r\nimport MyArrayInput from \"./MyArrayInput\";\r\nimport ControlledPanel from \"./ControlledPanel\";\r\nimport { withRouter } from \"react-router\";\r\nimport {\r\n  List,\r\n  Edit,\r\n  Show,\r\n  Create,\r\n  Datagrid,\r\n  TextField,\r\n  TextInput,\r\n  SimpleShowLayout,\r\n  SimpleForm,\r\n  EditButton,\r\n  ReferenceManyField,\r\n  ReferenceField,\r\n  ArrayInput,\r\n  SimpleFormIterator,\r\n  Filter,\r\n  TabbedForm,\r\n  FormTab,\r\n  Pagination\r\n} from \"react-admin\";\r\nimport { actions } from \"../features/Wordbook/state\";\r\nimport { connect } from \"react-redux\";\r\n\r\nconst PostFilter = props => (\r\n  <Filter {...props}>\r\n    <TextInput label=\"Search\" source=\"q\" alwaysOn />\r\n    <TextInput label=\"Title\" source=\"title\" defaultValue=\"Hello, World!\" />\r\n  </Filter>\r\n);\r\nexport const WordbookList = connect(\r\n  null,\r\n  { ...actions }\r\n)(({ setCurrentWordbook, setWordbook, ...props }) => {\r\n  console.log(\"setCurrentWordbook\", props);\r\n  return (\r\n    <List {...props} filters={<PostFilter />}>\r\n      <Datagrid\r\n        rowClick={(id, basePath, record) => {\r\n          console.log(props.setWordbook);\r\n          setCurrentWordbook(id);\r\n          setWordbook(id);\r\n          return \"show\";\r\n        }}\r\n      >\r\n        <TextField source=\"name\" />\r\n        <TextField source=\"id\" />\r\n        <EditableTextField source=\"name\" />\r\n      </Datagrid>\r\n    </List>\r\n  );\r\n});\r\nexport const WordbookListHoc = fn => props => (\r\n  <WordbookList {...props} setCurrentWordbook={fn} />\r\n);\r\n// export const WordbookList = connect(\r\n//   null,\r\n//   { setWordbook: actions.setWordbook }\r\n// )(WList);\r\nexport const WordbookEdit = props => (\r\n  <Edit {...props}>\r\n    <TabbedForm>\r\n      <FormTab label=\"basic\">\r\n        <TextField source=\"id\" />\r\n        <TextInput source=\"name\" />\r\n      </FormTab>\r\n      <FormTab label=\"words\" path=\"showWords\">\r\n        <ReferenceManyField\r\n          label=\"Words\"\r\n          reference=\"WordMappings\"\r\n          target=\"bookId\"\r\n          pagination={<Pagination />}\r\n        >\r\n          <Datagrid>\r\n            <TextField source=\"wordId\" />\r\n            <TextField source=\"word.spelling\" />\r\n            <ReferenceField label=\"spelling\" source=\"wordId\" reference=\"Words\">\r\n              <TextField source=\"spelling\" />\r\n            </ReferenceField>\r\n          </Datagrid>\r\n        </ReferenceManyField>\r\n      </FormTab>\r\n      <FormTab label=\"new words\" path=\"addWords\">\r\n        {/* <MyArrayInput source=\"words\" innerSource=\"spelling\" /> */}\r\n        <ControlledPanel source=\"words\" />\r\n      </FormTab>\r\n    </TabbedForm>\r\n  </Edit>\r\n);\r\nconst cardActionStyle = {\r\n  zIndex: 2,\r\n  display: \"inline-block\",\r\n  float: \"right\"\r\n};\r\nconst WordbookActions = withRouter(({ basePath, data, resource, history }) => (\r\n  <CardActions style={cardActionStyle}>\r\n    <EditButton basePath={basePath} record={data} />\r\n    {/* Add your custom actions */}\r\n    <Button\r\n      color=\"primary\"\r\n      onClick={() => {\r\n        console.log(basePath, data, resource, history);\r\n        history.push(`/wordsfrombooks/${data.id}/words`);\r\n      }}\r\n    >\r\n      查看单词表\r\n    </Button>\r\n    <CreatePracticeButton basePath={basePath} record={data} />\r\n    <BrowseWordbookButton basePath={basePath} record={data} />\r\n  </CardActions>\r\n));\r\nexport const WordbookShow = props => (\r\n  <Show actions={<WordbookActions />} {...props}>\r\n    <SimpleShowLayout>\r\n      <TextField source=\"name\" />\r\n      <TextField source=\"id\" />\r\n      <ReferenceManyField\r\n        label=\"Words\"\r\n        reference=\"WordMappings\"\r\n        target=\"bookId\"\r\n      >\r\n        <Datagrid>\r\n          <TextField source=\"wordId\" />\r\n          <ReferenceField label=\"spelling\" source=\"wordId\" reference=\"Words\">\r\n            <TextField source=\"spelling\" />\r\n          </ReferenceField>\r\n        </Datagrid>\r\n      </ReferenceManyField>\r\n    </SimpleShowLayout>\r\n  </Show>\r\n);\r\nexport const WordbookCreate = props => (\r\n  <Create {...props}>\r\n    <SimpleForm>\r\n      <TextInput source=\"name\" />\r\n      <ArrayInput source=\"words\">\r\n        <SimpleFormIterator>\r\n          <TextInput source=\"spelling\" />\r\n        </SimpleFormIterator>\r\n      </ArrayInput>\r\n    </SimpleForm>\r\n  </Create>\r\n);\r\n","import React from \"react\";\r\nimport {\r\n  List,\r\n  Edit,\r\n  Show,\r\n  Create,\r\n  Datagrid,\r\n  TextField,\r\n  TextInput,\r\n  SimpleShowLayout,\r\n  SimpleForm,\r\n  EditButton,\r\n  ReferenceManyField,\r\n  ReferenceField,\r\n  ArrayInput,\r\n  SimpleFormIterator,\r\n  Filter,\r\n  TabbedForm,\r\n  FormTab,\r\n  Pagination\r\n} from \"react-admin\";\r\nimport { connect } from \"react-redux\";\r\nconst WList = props => (\r\n  <List {...props}>\r\n    <Datagrid rowClick=\"edit\">\r\n      <TextField source=\"id\" />\r\n      <TextField source=\"bookId\" />\r\n      <TextField source=\"wordId\" />\r\n\r\n      <TextField source=\"wordbook.name\" />\r\n      <TextField source=\"word.spelling\" />\r\n    </Datagrid>\r\n  </List>\r\n);\r\nconst stateToMap = state => ({\r\n  filter: { bookId: state.currentWordbook }\r\n});\r\nexport const WordmappingList = connect(stateToMap)(WList);\r\n","import React from \"react\";\r\nimport { Redirect } from \"react-router\";\r\nimport {\r\n  List,\r\n  Edit,\r\n  Show,\r\n  Create,\r\n  Datagrid,\r\n  TextField,\r\n  TextInput,\r\n  SimpleShowLayout,\r\n  SimpleForm,\r\n  EditButton,\r\n  DateField,\r\n  ReferenceField\r\n} from \"react-admin\";\r\nexport const PracticeList = ({ setCurrentWordbook, ...props }) => {\r\n  console.log(\"setCurrentWordbook\", props);\r\n  return (\r\n    <List {...props}>\r\n      <Datagrid\r\n        rowClick={(id, basePath, record) => {\r\n          console.log(props.setWordbook);\r\n          setCurrentWordbook(id);\r\n          return \"edit\";\r\n        }}\r\n      >\r\n        <DateField source=\"lastAccessed\" />\r\n        <TextField source=\"id\" />\r\n\r\n        <ReferenceField source=\"bookId\" reference=\"Wordbooks\">\r\n          <TextField source=\"name\" />\r\n        </ReferenceField>\r\n        <TextField source=\"progress\" />\r\n      </Datagrid>\r\n    </List>\r\n  );\r\n};\r\n// export const Appusers/me/practiceList = props => (\r\n//   <List {...props}>\r\n//       <Datagrid rowClick=\"edit\">\r\n//           <DateField source=\"lastAccessed\" />\r\n//           <TextField source=\"id\" />\r\n\r\n//           <ReferenceField source=\"bookId\" reference=\"Wordbooks\"><TextField source=\"name\" /></ReferenceField>\r\n//           <TextField source=\"progress\" />\r\n//       </Datagrid>\r\n//   </List>\r\n\r\nexport const PracticeListHoc = fn => props => (\r\n  <PracticeList {...props} setCurrentWordbook={fn} />\r\n);\r\n// export const WordbookList = connect(\r\n//   null,\r\n//   { setWordbook: actions.setWordbook }\r\n// )(WList);\r\nexport const PracticeRedirect = props => {\r\n  console.log(props);\r\n  return <Redirect to={`/testsfrombooks/${props.id}/words`} />;\r\n};\r\n","import React from \"react\";\r\nimport CardActions from \"@material-ui/core/CardActions\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport { withRouter } from \"react-router\";\r\nimport { connect } from \"react-redux\";\r\nimport {\r\n  List,\r\n  Edit,\r\n  Show,\r\n  Create,\r\n  Datagrid,\r\n  TextField,\r\n  TextInput,\r\n  SimpleShowLayout,\r\n  SimpleForm,\r\n  EditButton\r\n} from \"react-admin\";\r\nconst stateToProps = state => ({\r\n  api_url: `wordbooks/${state.currentWordbook}/words`\r\n});\r\nexport const WordList = connect(stateToProps)(\r\n  ({ api_url, filter, dispatch, ...props }) => (\r\n    <List {...props} filter={{ ...filter, api_url }}>\r\n      <Datagrid rowClick=\"edit\">\r\n        <TextField source=\"spelling\" />\r\n        <TextField source=\"id\" />\r\n      </Datagrid>\r\n    </List>\r\n  )\r\n);\r\n\r\nexport const WordEdit = props => (\r\n  <Edit {...props}>\r\n    <SimpleForm>\r\n      <TextInput source=\"spelling\" />\r\n      <TextInput source=\"id\" />\r\n    </SimpleForm>\r\n  </Edit>\r\n);\r\n\r\nexport const WordShow = props => (\r\n  <Show {...props}>\r\n    <SimpleShowLayout>\r\n      <TextField source=\"spelling\" />\r\n      <TextField source=\"id\" />\r\n    </SimpleShowLayout>\r\n  </Show>\r\n);\r\n\r\nexport const WordCreate = props => (\r\n  <Create {...props}>\r\n    <SimpleForm>\r\n      <TextInput source=\"spelling\" />\r\n      <TextInput source=\"id\" />\r\n    </SimpleForm>\r\n  </Create>\r\n);\r\n","import React, { Component } from \"react\";\r\nclass ErrorBoundary extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { hasError: false };\r\n  }\r\n\r\n  static getDerivedStateFromError(error) {\r\n    // Update state so the next render will show the fallback UI.\r\n    return { hasError: true };\r\n  }\r\n\r\n  componentDidCatch(error, info) {\r\n    // You can also log the error to an error reporting service\r\n    //logErrorToMyService(error, info);\r\n    console.log(error, info);\r\n  }\r\n\r\n  render() {\r\n    if (this.state.hasError) {\r\n      // You can render any custom fallback UI\r\n      return <h1>Something went wrong.</h1>;\r\n    }\r\n\r\n    return this.props.children;\r\n  }\r\n}\r\nexport default ErrorBoundary;\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\nimport ButtonBase from \"@material-ui/core/ButtonBase\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport * as animate from \"animate.css/animate.css\";\r\nconst styles = theme => ({\r\n  root: {\r\n    display: \"flex\",\r\n    flexWrap: \"wrap\",\r\n    minWidth: 300,\r\n    width: \"100%\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\"\r\n  },\r\n  image: {\r\n    position: \"relative\",\r\n    height: 200,\r\n    [theme.breakpoints.down(\"xs\")]: {\r\n      width: \"100% !important\", // Overrides inline-style\r\n      height: 100\r\n    },\r\n    \"&:hover, &$focusVisible\": {\r\n      zIndex: 1,\r\n      \"& $imageBackdrop\": {\r\n        opacity: 0.15\r\n      },\r\n      \"& $imageMarked\": {\r\n        opacity: 0\r\n      },\r\n      \"& $imageTitle\": {\r\n        border: \"4px solid currentColor\"\r\n      }\r\n    },\r\n    \"&:focus\": {\r\n      \"& $imageRight\": {\r\n        opacity: 1,\r\n        transitionDuration: \"500ms\"\r\n      }\r\n    }\r\n  },\r\n  focusVisible: {},\r\n  imageSrc: {\r\n    position: \"absolute\",\r\n    left: 0,\r\n    right: 0,\r\n    top: 0,\r\n    bottom: 0,\r\n    backgroundColor: \"grey\"\r\n  },\r\n  imageBackdrop: {\r\n    position: \"absolute\",\r\n    left: 0,\r\n    right: 0,\r\n    top: 0,\r\n    bottom: 0,\r\n    backgroundColor: theme.palette.common.black,\r\n    opacity: 0.4,\r\n    transition: theme.transitions.create(\"opacity\")\r\n  },\r\n  imageRight: {\r\n    position: \"absolute\",\r\n    left: 0,\r\n    right: 0,\r\n    top: 0,\r\n    bottom: 0,\r\n    backgroundColor: \"green\",\r\n    opacity: 0,\r\n    transition: theme.transitions.create(\"opacity\"),\r\n    transitionDuration: \"500ms\"\r\n  },\r\n  imageButton: {\r\n    position: \"absolute\",\r\n    left: 0,\r\n    right: 0,\r\n    top: 0,\r\n    bottom: 0,\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    color: theme.palette.common.white\r\n  },\r\n  imageTitle: {\r\n    position: \"relative\",\r\n    padding: `${theme.spacing.unit * 2}px ${theme.spacing.unit * 4}px ${theme\r\n      .spacing.unit + 6}px`\r\n  },\r\n  imageMarked: {\r\n    height: 3,\r\n    width: 18,\r\n    backgroundColor: theme.palette.common.white,\r\n    position: \"absolute\",\r\n    bottom: -2,\r\n    left: \"calc(50% - 9px)\",\r\n    transition: theme.transitions.create(\"opacity\")\r\n  }\r\n});\r\n\r\nclass ButtonOptions extends Component {\r\n  state = {\r\n    animated: false\r\n  };\r\n  render() {\r\n    const { classes, letters, userInput } = this.props;\r\n\r\n    return (\r\n      <div className={classes.root}>\r\n        {letters.map(letter => {\r\n          let el;\r\n          return (\r\n            <ButtonBase\r\n              focusRipple\r\n              key={letter}\r\n              className={\r\n                this.state.animated\r\n                  ? [classes.image, animate.animated, animate.bounce].join(\" \")\r\n                  : classes.image\r\n              }\r\n              focusVisibleClassName={classes.focusVisible}\r\n              ref={b => (el = b)}\r\n              onClick={() => {\r\n                //userInput(letter);\r\n                console.log(animate);\r\n                console.log(\"el\", el, animate.animated, animate.bounce);\r\n                //el.classList.add(animate.animate, animate.bounce);\r\n                this.setState({ animated: !this.state.animated });\r\n                //this.setState({ animated: true });\r\n              }}\r\n              onAnimationEnd={() => {\r\n                this.setState({ animated: false });\r\n              }}\r\n              // onTransitionEnd={e => {\r\n              //   console.log(\r\n              //     \"transition\",\r\n              //     e.propertyName,\r\n              //     e.pseudoElement,\r\n              //     e.elapsedTime\r\n              //   );\r\n              //   userInput(letter);\r\n              // }}\r\n              style={{\r\n                width: \"50%\",\r\n                maxWidth: 200\r\n              }}\r\n            >\r\n              <span className={classes.imageSrc} />\r\n              <span className={classes.imageRight} />\r\n              <span className={classes.imageButton}>\r\n                <Typography\r\n                  component=\"span\"\r\n                  variant=\"subtitle1\"\r\n                  color=\"inherit\"\r\n                  className={classes.imageTitle}\r\n                >\r\n                  {letter}\r\n                  <span className={classes.imageMarked} />\r\n                </Typography>\r\n              </span>\r\n            </ButtonBase>\r\n          );\r\n        })}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nButtonOptions.propTypes = {\r\n  classes: PropTypes.object.isRequired\r\n};\r\n\r\nexport default withStyles(styles)(ButtonOptions);\r\n","//generage an array of random numbers ranging from min to max\r\n//the size of the array is size. all numbers don't repeat.\r\nfunction generateNumsArray(min, max, size) {\r\n  if (max <= min || size <= 0)\r\n    throw new Error(\"params error in generateNumsArray\");\r\n  let arr = [];\r\n  while (arr.length < size) {\r\n    let val = min + Math.floor((max - min + 1) * Math.random());\r\n    if (!arr.includes(val)) arr.push(val);\r\n  }\r\n  return arr;\r\n}\r\n//generate an array of random lowercase chars that don't repeat.\r\n//one char is specified which always exists in the array\r\nexport function generateRandomCharArray(char, size) {\r\n  let lchar = char.toLowerCase().charAt(0);\r\n  let lv = lchar.charCodeAt(0);\r\n  let lmax = 97 + 25; //charcode of \"z\"\r\n  if (lchar < \"a\" || lchar > \"z\" || size <= 0)\r\n    throw new Error(\"params error in generateRandomCharArray\");\r\n  let arr1 = [lchar];\r\n  let arr2 = generateNumsArray(1, 25, size - 1).map(v =>\r\n    String.fromCharCode(v + lv > lmax ? v + lv - 26 : v + lv)\r\n  );\r\n  return arr1.concat(arr2).sort();\r\n}\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport ButtonOptions from \"./ButtonOptions\";\r\nimport { generateRandomCharArray } from \"../utilities/random\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\n\r\nconst styles = theme => ({\r\n  root: {\r\n    display: \"flex\",\r\n    flexWrap: \"wrap\",\r\n    minWidth: 300,\r\n    width: \"100%\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\"\r\n  }\r\n});\r\nclass TestItem extends Component {\r\n  state = { charIndex: 0, userInput: [] };\r\n  handleInput(c) {\r\n    const { spelling, mode, onComplete } = this.props;\r\n\r\n    if (mode === \"learning\" && c !== spelling.charAt(this.state.charIndex))\r\n      return;\r\n    this.setState(preState => ({\r\n      userInput: preState.userInput.concat(c),\r\n      charIndex: preState.charIndex + 1\r\n    }));\r\n    if (this.state.userInput.length === spelling.length - 1)\r\n      return setTimeout(() => {\r\n        onComplete();\r\n      }, 1000);\r\n  }\r\n  componentWillReceiveProps() {\r\n    this.setState({ charIndex: 0, userInput: [] });\r\n  }\r\n  render() {\r\n    const { classes } = this.props;\r\n    return (\r\n      <div className={classes.root}>\r\n        <h2>{this.props.spelling}</h2>\r\n        <h2>\r\n          {this.state.userInput.join(\"\") +\r\n            \"_\".repeat(\r\n              this.props.spelling.length - this.state.userInput.length\r\n            )}\r\n        </h2>\r\n        {this.props.spelling.length > this.state.charIndex ? (\r\n          <ButtonOptions\r\n            letters={generateRandomCharArray(\r\n              this.props.spelling.charAt(this.state.charIndex),\r\n              2\r\n            )}\r\n            //letters={[\"a\", \"b\", \"c\", \"d\"]}\r\n            userInput={this.handleInput.bind(this)}\r\n          />\r\n        ) : null}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nTestItem.propTypes = {\r\n  spelling: PropTypes.string.isRequired\r\n};\r\n\r\nTestItem.defaultProps = {\r\n  spelling: \"wtf\"\r\n};\r\n\r\nexport default withStyles(styles)(TestItem);\r\n","import React, { Component } from \"react\";\r\nimport { withRouter } from \"react-router\";\r\nimport {\r\n  List,\r\n  Edit,\r\n  Show,\r\n  Create,\r\n  Datagrid,\r\n  TextField,\r\n  TextInput,\r\n  SimpleShowLayout,\r\n  SimpleForm,\r\n  EditButton\r\n} from \"react-admin\";\r\nimport ErrorBoundary from \"./ErrorBoundary\";\r\nimport ButtonOptions from \"./ButtonOptions\";\r\nimport TestItem from \"./TestItem\";\r\nimport { generateRandomCharArray } from \"../utilities/random\";\r\nimport posed, { PoseGroup } from \"react-pose\";\r\nimport { connect } from \"react-redux\";\r\nconst Box = posed.div({\r\n  inFromRight1: {\r\n    opacity: 1,\r\n    x: 0,\r\n    transition: {\r\n      x: ({ from, to }) => ({\r\n        type: \"keyframes\",\r\n        values: [from, -1000, 1000, to],\r\n        times: [0, 0.5, 0.51, 1],\r\n        duration: 1000\r\n      }),\r\n      opacity: ({ from, to }) => ({\r\n        type: \"keyframes\",\r\n        values: [from, 0, 0, to],\r\n        times: [0, 0.5, 0.51, 1],\r\n        duration: 1000\r\n      })\r\n    }\r\n  },\r\n  inFromRight2: {\r\n    opacity: 1,\r\n    x: 0,\r\n    transition: {\r\n      x: ({ from, to }) => ({\r\n        type: \"keyframes\",\r\n        values: [from, -1000, 1000, to],\r\n        times: [0, 0.5, 0.51, 1],\r\n        duration: 1000\r\n      }),\r\n      opacity: ({ from, to }) => ({\r\n        type: \"keyframes\",\r\n        values: [from, 0, 0, to],\r\n        times: [0, 0.5, 0.51, 1],\r\n        duration: 1000\r\n      })\r\n    }\r\n  },\r\n  inFromLeft1: {\r\n    opacity: 1,\r\n    x: 0,\r\n    transition: {\r\n      x: ({ from, to }) => ({\r\n        type: \"keyframes\",\r\n        values: [from, 1000, -1000, to],\r\n        times: [0, 0.5, 0.51, 1],\r\n        duration: 1000\r\n      }),\r\n      opacity: ({ from, to }) => ({\r\n        type: \"keyframes\",\r\n        values: [from, 0, 0, to],\r\n        times: [0, 0.5, 0.51, 1],\r\n        duration: 1000\r\n      })\r\n    }\r\n  },\r\n  inFromLeft2: {\r\n    opacity: 1,\r\n    x: 0,\r\n    transition: {\r\n      x: ({ from, to }) => ({\r\n        type: \"keyframes\",\r\n        values: [from, 1000, -1000, to],\r\n        times: [0, 0.5, 0.51, 1],\r\n        duration: 1000\r\n      }),\r\n      opacity: ({ from, to }) => ({\r\n        type: \"keyframes\",\r\n        values: [from, 0, 0, to],\r\n        times: [0, 0.5, 0.51, 1],\r\n        duration: 1000\r\n      })\r\n    }\r\n  }\r\n});\r\n\r\nclass TestItems extends Component {\r\n  state = { index: 0, swipeToLeft: true, myPose: \"inFromRight1\" };\r\n  switchToL = () => {\r\n    this.setState({\r\n      swipeToLeft: true,\r\n      myPose:\r\n        this.state.myPose === \"inFromRight1\" ? \"inFromRight2\" : \"inFromRight1\"\r\n    });\r\n  };\r\n  switchToR = () => {\r\n    this.setState({\r\n      swipeToLeft: false,\r\n      myPose:\r\n        this.state.myPose === \"inFromLeft1\" ? \"inFromLeft2\" : \"inFromLeft1\"\r\n    });\r\n  };\r\n  handleToPrev = () => {\r\n    const { ids, data, basePath } = this.props;\r\n    this.setState(prevState => {\r\n      return !!prevState.index ? { index: prevState.index - 1 } : prevState;\r\n    });\r\n    this.switchToR();\r\n  };\r\n  handleToNext = () => {\r\n    const { ids, data, basePath } = this.props;\r\n    this.setState(prevState => {\r\n      return prevState.index < ids.length - 1\r\n        ? { index: prevState.index + 1 }\r\n        : prevState;\r\n    });\r\n    this.switchToL();\r\n  };\r\n  render() {\r\n    const { ids, data, basePath, location } = this.props;\r\n    // console.log(ids, \"data\", data, location);\r\n    // if (ids.length)\r\n    //   [...data[ids[this.state.index]][\"word\"][\"spelling\"]].forEach(v =>\r\n    //     console.log(generateRandomCharArray(v, 4))\r\n    //   );\r\n    //console.log(ids, data, this.state.index);\r\n    return (\r\n      <ErrorBoundary>\r\n        <div>\r\n          <button onClick={this.handleToPrev}>prev</button>\r\n          <button onClick={this.handleToNext}>next</button>\r\n\r\n          <Box pose={this.state.myPose}>\r\n            {ids.length &&\r\n            ids[this.state.index] &&\r\n            data[ids[this.state.index]][\"word\"] ? (\r\n              <TestItem\r\n                key={this.state.index}\r\n                mode=\"learning\"\r\n                spelling={data[ids[this.state.index]][\"word\"][\"spelling\"]}\r\n                onComplete={this.handleToNext}\r\n              />\r\n            ) : null}\r\n          </Box>\r\n        </div>\r\n      </ErrorBoundary>\r\n    );\r\n  }\r\n}\r\nconst WordTestsWithRouter = withRouter(TestItems);\r\nexport const WordTests = props => (\r\n  <List {...props} perPage={5}>\r\n    <WordTestsWithRouter />\r\n  </List>\r\n);\r\n\r\nexport const WordTestList = ({ dispatch, ...props }) => (\r\n  <List {...props}>\r\n    <TestItems />\r\n  </List>\r\n);\r\nconst stateToMap = state => ({\r\n  filter: { bookId: state.currentWordbook }\r\n});\r\n\r\nexport default connect(stateToMap)(WordTestList);\r\n","export default {\r\n  save : function(key, value, expirationSec){\r\n    if (typeof (Storage) === \"undefined\") { return false; }\r\n    var expirationMS = expirationSec * 1000;\r\n    var record = {value: value, timestamp: new Date().getTime() + expirationMS};\r\n    localStorage.setItem(key, JSON.stringify(record));\r\n\r\n    return value;\r\n  },\r\n  load : function(key){\r\n    if (typeof (Storage) === \"undefined\") { return false; }\r\n    try {\r\n      var record = JSON.parse(localStorage.getItem(key));\r\n      if (!record) {\r\n        return false;\r\n      }\r\n      return (new Date().getTime() < record.timestamp && record.value);\r\n    } catch (e) {\r\n      return false;\r\n    }\r\n  },\r\n  remove : function(key){\r\n    if (typeof (Storage) === \"undefined\") { return false; }\r\n    localStorage.removeItem(key);\r\n  },\r\n  update : function(key, value){\r\n    if (typeof (Storage) === \"undefined\") { return false; }\r\n    try {\r\n      var record = JSON.parse(localStorage.getItem(key));\r\n      if (!record) {\r\n        return false;\r\n      }\r\n      var updatedRecord = {value: value, timestamp: record.timestamp};\r\n      localStorage.setItem(key, JSON.stringify(updatedRecord));\r\n      return updatedRecord;\r\n    } catch (e) {\r\n      return false;\r\n    }\r\n  },\r\n};","import { fetchUtils } from 'react-admin';\r\nimport storage from './storage';\r\n\r\nexport default (url, options = {}) => {\r\n  options.user = {\r\n      authenticated: true,\r\n      token: storage.load('lbtoken').id\r\n  }\r\n  return fetchUtils.fetchJson(url, options);\r\n}","// in src/bitcoinSaga.js\r\nimport { put, takeEvery } from \"redux-saga/effects\";\r\nimport { USER_CHECK } from \"react-admin\";\r\nimport { actions } from \"./state\";\r\nexport default function* setUserSaga() {\r\n  yield takeEvery(USER_CHECK, function*() {\r\n    const token = JSON.parse(localStorage.getItem(\"lbtoken\"));\r\n    yield put(\r\n      actions.setUser(\r\n        token && token.value && token.value.username\r\n          ? token.value.username\r\n          : \"unknown user\"\r\n      )\r\n    );\r\n  });\r\n}\r\n","export default {\r\n  ra: {\r\n    action: {\r\n      delete: \"删除\",\r\n      show: \"查看\",\r\n      list: \"列表\",\r\n      save: \"保存\",\r\n      create: \"新建\",\r\n      edit: \"编辑\",\r\n      sort: \"排序\",\r\n      cancel: \"取消\",\r\n      undo: \"撤销\",\r\n      refresh: \"刷新\",\r\n      add: \"增加\",\r\n      remove: \"删除\",\r\n      add_filter: \"增加检索\",\r\n      remove_filter: \"移除检索\",\r\n      back: \"回退\",\r\n      bulk_actions: \"选中%{smart_count}项\",\r\n      export: \"导出\",\r\n      search: \"检索\",\r\n      show: \"显示\"\r\n    },\r\n    boolean: {\r\n      true: \"是\",\r\n      false: \"否\"\r\n    },\r\n    page: {\r\n      list: \"%{name} 列表\",\r\n      edit: \"%{name} #%{id}\",\r\n      show: \"%{name} #%{id}\",\r\n      create: \"新建 %{name}\",\r\n      dashboard: \"概览\",\r\n      not_found: \"未发现\",\r\n      loading: \"加载中\",\r\n      error: \"出现错误\"\r\n    },\r\n    input: {\r\n      file: {\r\n        upload_several: \"将文件集合拖拽到这里, 或点击这里选择文件集合.\",\r\n        upload_single: \"将文件拖拽到这里, 或点击这里选择文件.\"\r\n      },\r\n      image: {\r\n        upload_several: \"将图片文件集合拖拽到这里, 或点击这里选择图片文件集合.\",\r\n        upload_single: \"将图片文件拖拽到这里, 或点击这里选择图片文件.\"\r\n      },\r\n      references: {\r\n        all_missing: \"未找到参考数据.\",\r\n        many_missing: \"至少有一条参考数据不再可用.\",\r\n        single_missing: \"关联的参考数据不再可用.\"\r\n      }\r\n    },\r\n    message: {\r\n      yes: \"是\",\r\n      no: \"否\",\r\n      are_you_sure: \"您确定操作?\",\r\n      about: \"关于\",\r\n      not_found: \"您输入了错误的URL或者错误的链接.\",\r\n      loading: \"正在加载页面, 请稍候\",\r\n      invalid_form: \"表单输入无效. 请检查错误提示\",\r\n      delete_title: \"删除 %{name} #%{id}\",\r\n      delete_content: \"您确定要删除该条目?\",\r\n      bulk_delete_title: \"删除 %{name} |||| 删除 %{smart_count}项 %{name} \",\r\n      bulk_delete_content:\r\n        \"您确定要删除 %{name}? |||| 您确定要删除 %{smart_count} 项?\"\r\n    },\r\n    navigation: {\r\n      no_results: \"结果为空\",\r\n      no_more_results: \"页码 %{page} 超出边界. 试试上一页.\",\r\n      page_out_of_boundaries: \"页码 %{page} 超出边界\",\r\n      page_out_from_end: \"已到最末页\",\r\n      page_out_from_begin: \"已到最前页\",\r\n      page_range_info: \"%{offsetBegin}-%{offsetEnd} / %{total}\",\r\n      page_rows_per_page: \"每页行数:\",\r\n      next: \"向后\",\r\n      prev: \"向前\"\r\n    },\r\n    auth: {\r\n      user_menu: \"设置\",\r\n      username: \"用户名\",\r\n      email: \"邮箱\",\r\n      password: \"密码\",\r\n      passRepeat: \"再次确认密码\",\r\n      sign_in: \"登录\",\r\n      sign_up: \"注册\",\r\n      sign_up_success: \"注册成功,请登录\",\r\n      sign_up_failure: \"注册失败,请重试\",\r\n      sign_in_error: \"验证失败, 请重试\",\r\n      logout: \"退出\"\r\n    },\r\n    notification: {\r\n      updated: \"条目已更新 |||| %{smart_count} 项条目已更新\",\r\n      created: \"条目已新建\",\r\n      deleted: \"条目已删除 |||| %{smart_count} 项条目已删除\",\r\n      bad_item: \"不正确的条目\",\r\n      item_doesnt_exist: \"条目不存在\",\r\n      http_error: \"与服务通信出错\",\r\n      canceled: \"取消动作\",\r\n      data_provider_error: \"dataProvider错误. 请检查console的详细信息.\",\r\n      canceled: \"取消动作\"\r\n    },\r\n    validation: {\r\n      required: \"必填\",\r\n      minLength: \"必须不少于 %{min} 个字符\",\r\n      maxLength: \"必须不多于 %{max} 个字符\",\r\n      minValue: \"必须不小于 %{min}\",\r\n      maxValue: \"必须不大于 %{max}\",\r\n      number: \"必须为数字\",\r\n      email: \"必须是有效的邮箱\",\r\n      passRepeat: \"密码两次输入不一致\",\r\n      oneOf: \"必须为: %{options}其中一项\",\r\n      regex: \"必须符合指定的格式 (regexp): %{pattern}\"\r\n    }\r\n  }\r\n};\r\n","//in reducers.js\r\nimport { combineReducers } from \"redux\";\r\nimport { routerReducer } from \"react-router-redux\";\r\nimport { reducer as formReducer } from \"redux-form\";\r\nimport { adminReducer, i18nReducer, USER_LOGOUT } from \"react-admin\";\r\n\r\nimport wordbookReducer from \"./features/Wordbook/state\";\r\nimport userReducer from \"./features/User/state\";\r\n\r\nimport defaultMessages from \"ra-language-english\";\r\nimport chineseMessages from \"./lang/chinese\";\r\n\r\nconst messages = {\r\n  cn: chineseMessages\r\n};\r\nconst i18nProvider = locale => {\r\n  if (locale !== \"en\") {\r\n    return messages[locale];\r\n  }\r\n  return defaultMessages;\r\n};\r\n//this is where to change language settings.\r\nconst locale = \"cn\";\r\n\r\nconst reducer = combineReducers({\r\n  admin: adminReducer,\r\n  i18n: i18nReducer(locale, i18nProvider(locale)),\r\n  form: formReducer,\r\n  router: routerReducer,\r\n  user: userReducer,\r\n  currentWordbook: wordbookReducer\r\n});\r\nconst resettableAppReducer = (state, action) =>\r\n  reducer(action.type !== USER_LOGOUT ? state : undefined, action);\r\n\r\nexport default resettableAppReducer;\r\n","import React, { Component } from \"react\";\r\nimport {\r\n  fetchUtils,\r\n  Admin,\r\n  Resource,\r\n  ListGuesser,\r\n  EditGuesser,\r\n  ShowGuesser,\r\n  defaultI18nProvider\r\n} from \"react-admin\";\r\nimport MyResource from \"./components/CurrentWordList\";\r\n// import jsonServerProvider from 'ra-data-json-server';\r\nimport defaultMessages from \"ra-language-english\";\r\nimport { Provider } from \"react-redux\";\r\nimport Login from \"./components/Login\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport customRoutes from \"./route\";\r\nimport layout from \"./Layout\";\r\nimport {\r\n  WordbookList,\r\n  WordbookShow,\r\n  WordbookEdit,\r\n  WordbookCreate,\r\n  WordbookListHoc\r\n} from \"./components/Wordbook\";\r\nimport { WordmappingList } from \"./components/WordMapping\";\r\nimport {\r\n  PracticeList,\r\n  PracticeListHoc,\r\n  PracticeRedirect\r\n} from \"./components/Practice\";\r\nimport { WordCreate, WordList } from \"./components/Word\";\r\nimport WordTestList, {\r\n  WordTestList as WTestList,\r\n  WordTests\r\n} from \"./components/WordTests\";\r\n\r\nimport userReducer from \"./features/User/state\";\r\nimport wordbookReducer from \"./features/Wordbook/state\";\r\nimport routeConvertor from \"./utilities/RouteConvert\";\r\n// const dataProvider = jsonServerProvider('http://localhost:3000/api');\r\n//import loopbackClient from \"react-admin-loopback\";\r\nimport loopbackClient from \"./DataProvider\";\r\nimport { authProvider } from \"./DataProvider/authProvider\";\r\nimport createHistory from \"history/createBrowserHistory\";\r\nimport setUserSaga from \"./features/User/saga\";\r\nimport chineseMessages from \"./lang/chinese\";\r\nimport createAdminStore from \"./createAdminStore\";\r\nimport { hot } from \"react-hot-loader/root\";\r\nconst history = createHistory({ basename: \"/\" });\r\nconst messages = {\r\n  cn: chineseMessages\r\n};\r\nconst i18nProvider = locale => {\r\n  if (locale !== \"en\") {\r\n    return messages[locale];\r\n  }\r\n  return defaultMessages;\r\n};\r\nconst httpClient = (url, options = {}) => {\r\n  if (!options.headers) {\r\n    options.headers = new Headers({ Accept: \"application/json\" });\r\n  }\r\n  const token = JSON.parse(localStorage.getItem(\"lbtoken\"));\r\n  if (token && token.value && token.value.id) {\r\n    options.headers.set(\"Authorization\", ` ${token.value.id}`);\r\n  }\r\n  return fetchUtils.fetchJson(url, options);\r\n};\r\nlet API_URL;\r\nif (process.env.NODE_ENV === \"development\") {\r\n  API_URL = \"http://localhost:3000/api\";\r\n} else {\r\n  API_URL = \"/api\";\r\n}\r\nconst dataProvider = routeConvertor(loopbackClient(API_URL, httpClient));\r\nconst auth = authProvider(`${API_URL}/AppUsers/login`, history);\r\n//http://localhost:3000/api/AppUsers/login\r\n\r\nclass App extends Component {\r\n  state = { currentWordbook: \"\" };\r\n  setCurrentWordbook = v => {\r\n    this.setState({ currentWordbook: v });\r\n  };\r\n  WList = WordbookListHoc(this.setCurrentWordbook);\r\n  PList = PracticeListHoc(this.setCurrentWordbook);\r\n  render() {\r\n    console.log(\"app this.setcurrentwordbook\", this.setCurrentWordbook);\r\n    // const WList = WordbookListHoc(this.setCurrentWordbook);\r\n\r\n    return (\r\n      <Provider\r\n        store={createAdminStore({\r\n          authProvider: auth,\r\n          dataProvider,\r\n          i18nProvider,\r\n          history,\r\n          locale: \"cn\"\r\n        })}\r\n      >\r\n        <Admin\r\n          loginPage={Login}\r\n          history={history}\r\n          appLayout={layout}\r\n          customRoutes={customRoutes}\r\n          authProvider={auth}\r\n        >\r\n          {/* <Resource\r\n          name=\"Wordbooks\"\r\n          list={WordbookList}\r\n          show={WordbookShow}\r\n          edit={WordbookEdit}\r\n          create={WordbookCreate}\r\n        /> */}\r\n          <Resource\r\n            name=\"Wordbooks\"\r\n            list={this.WList}\r\n            show={WordbookShow}\r\n            edit={WordbookEdit}\r\n            create={WordbookCreate}\r\n          />\r\n          {/* <Resource name=\"Practices\" list={WList} edit={PracticeRedirect} /> */}\r\n\r\n          {/* <Resource\r\n            name={`WordsFromBooks/${this.state.currentWordbook}/words`}\r\n            list={ListGuesser}\r\n            show={ShowGuesser}\r\n            edit={EditGuesser}\r\n            create={WordCreate}\r\n          />\r\n          <Resource\r\n            name={`testsfrombooks/${this.state.currentWordbook}/words`}\r\n            list={WordTests}\r\n          /> */}\r\n          <Resource\r\n            name={`AppUsers/me/practices`}\r\n            list={this.PList}\r\n            options={{ label: \"我的练习\" }}\r\n          />\r\n          <Resource\r\n            name={`Words`}\r\n            list={WordList}\r\n            show={ShowGuesser}\r\n            edit={EditGuesser}\r\n            create={WordCreate}\r\n          />\r\n          <Resource name={`WordMappings`} list={WordTestList} />\r\n          <Resource name=\"sayhello\" list={WTestList} />\r\n          {/* <MyResource /> */}\r\n        </Admin>\r\n      </Provider>\r\n    );\r\n  }\r\n}\r\nexport default hot(App);\r\n","import {\r\n  GET_LIST,\r\n  GET_ONE,\r\n  GET_MANY,\r\n  GET_MANY_REFERENCE,\r\n  CREATE,\r\n  UPDATE,\r\n  UPDATE_MANY,\r\n  DELETE,\r\n  DELETE_MANY\r\n} from \"react-admin\";\r\n\r\nexport default function(dataProvider) {\r\n  /**\r\n   * @param {string} type Request type, e.g GET_LIST\r\n   * @param {string} resource Resource name, e.g. \"posts\"\r\n   * @param {Object} payload Request parameters. Depends on the request type\r\n   * @returns {Promise} the Promise for a data response\r\n   */\r\n  return (type, resource, params) => {\r\n    let arr = resource.split(\"/\");\r\n    let names = [\"wordsfrombooks\", \"testsfrombooks\"];\r\n    if (arr.length > 0 && names.includes(arr[0].toLowerCase())) {\r\n      arr[0] = \"Wordbooks\";\r\n      return dataProvider(type, arr.join(\"/\"), params);\r\n    }\r\n\r\n    if (\r\n      arr[0] &&\r\n      arr[0].toLowerCase() === \"wordbooks\" &&\r\n      (type === CREATE || type === UPDATE)\r\n    ) {\r\n      return dataProvider(CREATE, \"wordbooks/appcreate\", params);\r\n    }\r\n    if (\r\n      arr[0] &&\r\n      arr[0].toLowerCase() === \"wordmappings\" &&\r\n      (type === GET_LIST || type === GET_MANY_REFERENCE)\r\n    ) {\r\n      return dataProvider(type, resource, {\r\n        ...params,\r\n        include: [\"wordbook\", \"word\"]\r\n      });\r\n    }\r\n    if (resource === \"sayhello\") {\r\n      return dataProvider(type, \"wordbooks/hellowords\", params);\r\n    }\r\n    // if (arr[0] && arr[0].toLowerCase() === \"words\") {\r\n    //   const { filter, ...newp } = params;\r\n    //   if (!filter || !filter.api_url) {\r\n    //     return dataProvider(type, arr[0], params);\r\n    //   }\r\n    //   const { api_url, ...realFilter } = filter;\r\n    //   return dataProvider(type, api_url, { ...newp, filter: realFilter });\r\n    // }\r\n    return dataProvider(type, resource, params);\r\n  };\r\n}\r\n","// in src/createAdminStore.js\r\nimport { applyMiddleware, combineReducers, compose, createStore } from \"redux\";\r\nimport { routerMiddleware, routerReducer } from \"react-router-redux\";\r\nimport { reducer as formReducer } from \"redux-form\";\r\nimport createSagaMiddleware from \"redux-saga\";\r\nimport { all, fork } from \"redux-saga/effects\";\r\nimport formMiddleware from \"ra-core/lib/form/formMiddleware\";\r\nimport {\r\n  adminReducer,\r\n  adminSaga,\r\n  createAppReducer,\r\n  defaultI18nProvider,\r\n  i18nReducer,\r\n  USER_LOGOUT\r\n} from \"react-admin\";\r\n\r\nimport wordbookReducer from \"./features/Wordbook/state\";\r\nimport userReducer from \"./features/User/state\";\r\nimport setUserSaga from \"./features/User/saga\";\r\n\r\nimport defaultMessages from \"ra-language-english\";\r\nimport chineseMessages from \"./lang/chinese\";\r\nimport reducers from \"./reducers\";\r\nconst messages = {\r\n  cn: chineseMessages\r\n};\r\nconst i18nProvider = locale => {\r\n  if (locale !== \"en\") {\r\n    return messages[locale];\r\n  }\r\n  return defaultMessages;\r\n};\r\n\r\nexport default ({\r\n  authProvider,\r\n  dataProvider,\r\n  i18nProvider = defaultI18nProvider,\r\n  history,\r\n  locale = \"en\"\r\n}) => {\r\n  const reducer = combineReducers({\r\n    admin: adminReducer,\r\n    i18n: i18nReducer(locale, i18nProvider(locale)),\r\n    form: formReducer,\r\n    router: routerReducer,\r\n    user: userReducer,\r\n    currentWordbook: wordbookReducer\r\n  });\r\n  const resettableAppReducer = (state, action) =>\r\n    reducer(action.type !== USER_LOGOUT ? state : undefined, action);\r\n\r\n  const saga = function* rootSaga() {\r\n    yield all(\r\n      [\r\n        adminSaga(dataProvider, authProvider, i18nProvider),\r\n        setUserSaga\r\n        // add your own sagas here\r\n      ].map(fork)\r\n    );\r\n  };\r\n  const sagaMiddleware = createSagaMiddleware();\r\n\r\n  const store = createStore(\r\n    resettableAppReducer,\r\n    //reducers,\r\n    {\r\n      /* set your initial state here */\r\n    },\r\n    compose(\r\n      applyMiddleware(\r\n        sagaMiddleware,\r\n        formMiddleware,\r\n        routerMiddleware(history)\r\n        // add your own middlewares here\r\n      ),\r\n      typeof window !== \"undefined\" && window.__REDUX_DEVTOOLS_EXTENSION__\r\n        ? window.__REDUX_DEVTOOLS_EXTENSION__()\r\n        : f => f\r\n      // add your own enhancers here\r\n    )\r\n  );\r\n  sagaMiddleware.run(saga);\r\n\r\n  // if (process.env.NODE_ENV !== \"production\") {\r\n  //   if (module.hot) {\r\n  //     module.hot.accept(\"./reducers\", () => {\r\n  //       store.replaceReducer(reducers);\r\n  //     });\r\n  //   }\r\n  // }\r\n  return store;\r\n};\r\n","import { stringify } from \"query-string\";\r\nimport fetchJson from \"./fetch\";\r\n\r\nimport {\r\n  GET_LIST,\r\n  GET_ONE,\r\n  GET_MANY,\r\n  GET_MANY_REFERENCE,\r\n  CREATE,\r\n  UPDATE,\r\n  UPDATE_MANY,\r\n  DELETE,\r\n  DELETE_MANY\r\n} from \"react-admin\";\r\n\r\nexport * from \"./authProvider\";\r\nexport { default as storage } from \"./storage\";\r\n\r\nexport default (apiUrl, httpClient = fetchJson) => {\r\n  /**\r\n   * @param {String} type One of the constants appearing at the top if this file, e.g. 'UPDATE'\r\n   * @param {String} resource Name of the resource to fetch, e.g. 'posts'\r\n   * @param {Object} params The data request params, depending on the type\r\n   * @returns {Object} { url, options } The HTTP request parameters\r\n   */\r\n  const convertDataRequestToHTTP = (type, resource, params) => {\r\n    let url = \"\";\r\n    const options = {};\r\n    switch (type) {\r\n      case GET_LIST: {\r\n        const { page, perPage } = params.pagination;\r\n        const { field, order } = params.sort;\r\n        const include = params.include;\r\n        const query = {};\r\n        query[\"where\"] = { ...params.filter };\r\n        if (field) query[\"order\"] = [field + \" \" + order];\r\n        if (perPage > 0) {\r\n          query[\"limit\"] = perPage;\r\n          if (page >= 0) query[\"offset\"] = (page - 1) * perPage;\r\n        }\r\n        if (include) query[\"include\"] = include;\r\n        url = `${apiUrl}/${resource}?${stringify({\r\n          filter: JSON.stringify(query)\r\n        })}`;\r\n        console.log(\"getlist\", url);\r\n        break;\r\n      }\r\n      case GET_ONE:\r\n        url = `${apiUrl}/${resource}/${params.id}`;\r\n        break;\r\n      case GET_MANY: {\r\n        const listId = params.ids.map(id => {\r\n          return { id };\r\n        });\r\n        const query = {\r\n          where: { or: listId }\r\n        };\r\n        url = `${apiUrl}/${resource}?${stringify({\r\n          filter: JSON.stringify(query)\r\n        })}`;\r\n        break;\r\n      }\r\n      case GET_MANY_REFERENCE: {\r\n        const { page, perPage } = params.pagination;\r\n        const { field, order } = params.sort;\r\n        const include = params.include;\r\n        const query = {};\r\n        query[\"where\"] = { ...params.filter };\r\n        query[\"where\"][params.target] = params.id;\r\n        if (field) query[\"order\"] = [field + \" \" + order];\r\n        if (perPage > 0) {\r\n          query[\"limit\"] = perPage;\r\n          if (page >= 0) query[\"skip\"] = (page - 1) * perPage;\r\n        }\r\n        if (include) query[\"include\"] = include;\r\n        url = `${apiUrl}/${resource}?${stringify({\r\n          filter: JSON.stringify(query)\r\n        })}`;\r\n        break;\r\n      }\r\n      case UPDATE:\r\n        url = `${apiUrl}/${resource}/${params.id}`;\r\n        options.method = \"PUT\";\r\n        options.body = JSON.stringify(params.data);\r\n        break;\r\n      case CREATE:\r\n        url = `${apiUrl}/${resource}`;\r\n        options.method = \"POST\";\r\n        options.body = JSON.stringify(params.data);\r\n        break;\r\n      case DELETE:\r\n        url = `${apiUrl}/${resource}/${params.id}`;\r\n        options.method = \"DELETE\";\r\n        break;\r\n      default:\r\n        throw new Error(`Unsupported fetch action type ${type}`);\r\n    }\r\n    return { url, options };\r\n  };\r\n\r\n  /**\r\n   * @param {Object} response HTTP response from fetch()\r\n   * @param {String} type One of the constants appearing at the top if this file, e.g. 'UPDATE'\r\n   * @param {String} resource Name of the resource to fetch, e.g. 'posts'\r\n   * @param {Object} params The data request params, depending on the type\r\n   * @returns {Object} Data response\r\n   */\r\n  const convertHTTPResponse = (response, type, resource, params) => {\r\n    const { headers, json } = response;\r\n    switch (type) {\r\n      case GET_LIST:\r\n      case GET_MANY_REFERENCE:\r\n        if (!headers.has(\"content-range\")) {\r\n          throw new Error(\r\n            \"The Content-Range header is missing in the HTTP Response. The simple REST data provider expects responses for lists of resources to contain this header with the total number of results to build the pagination. If you are using CORS, did you declare Content-Range in the Access-Control-Expose-Headers header?\"\r\n          );\r\n        }\r\n        return {\r\n          data: json,\r\n          total: parseInt(\r\n            headers\r\n              .get(\"content-range\")\r\n              .split(\"/\")\r\n              .pop(),\r\n            10\r\n          )\r\n        };\r\n      case CREATE:\r\n        return { data: { ...params.data, id: json.id } };\r\n      case DELETE:\r\n        return { data: { ...json, id: params.id } };\r\n      default:\r\n        return { data: json };\r\n    }\r\n  };\r\n\r\n  /**\r\n   * @param {string} type Request type, e.g GET_LIST\r\n   * @param {string} resource Resource name, e.g. \"posts\"\r\n   * @param {Object} payload Request parameters. Depends on the request type\r\n   * @returns {Promise} the Promise for a data response\r\n   */\r\n  return (type, resource, params) => {\r\n    // simple-rest doesn't handle filters on UPDATE route, so we fallback to calling UPDATE n times instead\r\n    if (type === UPDATE_MANY) {\r\n      return Promise.all(\r\n        params.ids.map(id =>\r\n          httpClient(`${apiUrl}/${resource}/${id}`, {\r\n            method: \"PUT\",\r\n            body: JSON.stringify(params.data)\r\n          })\r\n        )\r\n      ).then(responses => ({\r\n        data: responses.map(response => response.json)\r\n      }));\r\n    }\r\n    // simple-rest doesn't handle filters on DELETE route, so we fallback to calling DELETE n times instead\r\n    if (type === DELETE_MANY) {\r\n      return Promise.all(\r\n        params.ids.map(id =>\r\n          httpClient(`${apiUrl}/${resource}/${id}`, {\r\n            method: \"DELETE\"\r\n          })\r\n        )\r\n      ).then(responses => ({\r\n        data: responses.map(response => response.json)\r\n      }));\r\n    }\r\n\r\n    const { url, options } = convertDataRequestToHTTP(type, resource, params);\r\n\r\n    return httpClient(url, options).then(response =>\r\n      convertHTTPResponse(response, type, resource, params)\r\n    );\r\n  };\r\n};\r\n","import { AUTH_LOGIN, AUTH_LOGOUT, AUTH_CHECK, AUTH_ERROR } from \"react-admin\";\r\nimport storage from \"./storage\";\r\nimport { push, replace } from \"react-router-redux\";\r\n\r\nexport const authProvider = (loginApiUrl, history, noAccessPage = \"/login\") => {\r\n  return (type, params) => {\r\n    if (type === AUTH_LOGIN) {\r\n      const request = new Request(loginApiUrl, {\r\n        method: \"POST\",\r\n        body: JSON.stringify(params),\r\n        headers: new Headers({ \"Content-Type\": \"application/json\" })\r\n      });\r\n      return fetch(request)\r\n        .then(response => {\r\n          if (response.status < 200 || response.status >= 300) {\r\n            throw new Error(response.statusText);\r\n          }\r\n          return response.json();\r\n        })\r\n        .then(({ ttl, ...data }) => {\r\n          const username = params.username || params.email;\r\n          data.username = username;\r\n          storage.save(\"lbtoken\", data, ttl);\r\n        });\r\n    }\r\n    if (type === AUTH_LOGOUT) {\r\n      storage.remove(\"lbtoken\");\r\n      return Promise.resolve();\r\n    }\r\n    if (type === AUTH_ERROR) {\r\n      const { status } = params;\r\n      if (status === 401 || status === 403) {\r\n        //storage.remove(\"lbtoken\");\r\n        //return Promise.reject({ redirectTo: noAccessPage });\r\n        // console.log(\"auth error\");\r\n        // history.push(\"/unauthorized\");\r\n        // return Promise.resolve({ redirectTo: noAccessPage });\r\n      }\r\n      return Promise.resolve();\r\n    }\r\n    if (type === AUTH_CHECK) {\r\n      const token = storage.load(\"lbtoken\");\r\n      if (token && token.id && token.username) {\r\n        return Promise.resolve(token.username);\r\n      } else {\r\n        storage.remove(\"lbtoken\");\r\n        return Promise.reject({ redirectTo: noAccessPage });\r\n      }\r\n    }\r\n    return Promise.reject(\"Unkown method\");\r\n  };\r\n};\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read http://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { Provider } from \"react-redux\";\r\nimport { fetchUtils } from \"react-admin\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\n// import createAdminStore from \"./createAdminStore\";\r\n// import routeConvertor from \"./utilities/RouteConvert\";\r\n// import loopbackClient from \"./DataProvider\";\r\n// import { authProvider } from \"./DataProvider/authProvider\";\r\n// import createHistory from \"history/createBrowserHistory\";\r\n// import defaultMessages from \"ra-language-english\";\r\n// import chineseMessages from \"./lang/chinese\";\r\n// const history = createHistory({ basename: \"/\" });\r\n// const messages = {\r\n//   cn: chineseMessages\r\n// };\r\n// const i18nProvider = locale => {\r\n//   if (locale !== \"en\") {\r\n//     return messages[locale];\r\n//   }\r\n//   return defaultMessages;\r\n// };\r\n// const httpClient = (url, options = {}) => {\r\n//   if (!options.headers) {\r\n//     options.headers = new Headers({ Accept: \"application/json\" });\r\n//   }\r\n//   const token = JSON.parse(localStorage.getItem(\"lbtoken\"));\r\n//   if (token && token.value && token.value.id) {\r\n//     options.headers.set(\"Authorization\", ` ${token.value.id}`);\r\n//   }\r\n//   return fetchUtils.fetchJson(url, options);\r\n// };\r\n// let API_URL;\r\n// if (process.env.NODE_ENV === \"development\") {\r\n//   API_URL = \"http://localhost:3000/api\";\r\n// } else {\r\n//   API_URL = \"/api\";\r\n// }\r\n// const dataProvider = routeConvertor(loopbackClient(\"API_URL\", httpClient));\r\n// const auth = authProvider(`${API_URL}/Users/login`, history);\r\n\r\n// const store = createAdminStore({\r\n//   authProvider: auth,\r\n//   dataProvider,\r\n//   i18nProvider,\r\n//   history,\r\n//   locale: \"cn\"\r\n// });\r\n\r\nReactDOM.render(<App />, document.getElementById(\"root\"));\r\n\r\n// if (module.hot) {\r\n//   module.hot.accept(\"./App\", () => {\r\n//     const NextApp = require(\"./App\").default;\r\n//     ReactDOM.render(<NextApp />, document.getElementById(\"root\"));\r\n//   });\r\n// }\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: http://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}