(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{434:function(e,t,a){e.exports=a(763)},441:function(e,t,a){},763:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(48),i=a.n(o),c=a(8),s=a(710),l=(a(441),a(56)),u=a(57),m=a(62),d=a(58),p=a(63),h=a(781),f=a(773),g=a(785),b=a(786),v=a(779),E=a(65),y=Object(E.c)(function(e){return r.a.createElement(f.a,e)}),O=(Object(c.b)(function(e){return console.log(e.currentWordbook),{currentWordbook:e.currentWordbook}})(function(e){return console.log("currentwordlist is refreshed!",e.currentWordbook),e.currentWordbook?r.a.createElement(y,Object.assign({},e,{name:"Wordsfrombooks/".concat(e.currentWordbook,"/words"),list:g.a})):null}),a(66)),w=a.n(O),j=a(143),k=a(89),_=a(251),x=a(389),S=a(386),N=a(9),C=a.n(N),T=a(167),P=a.n(T),I=a(30),W=a.n(I),R=a(59),L=a.n(R),B=a(96),A=a.n(B),J=a(73),U=a.n(J),F=a(60),M=a.n(F),z=a(5),D=a(168),H=a.n(D),V=a(373),q=a(40),$=a(94),X=a(784),K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;return"SET_USER"===a?n.user:e},G={setUser:Object(X.a)("SET_USER",function(e){return{user:e}})},Q={palette:{secondary:{light:"#5f5fc4",main:"#283593",dark:"#001064",contrastText:"#fff"}}},Y=function(e){var t=e.meta,a=(t=void 0===t?{}:t).touched,n=t.error,o=Object(_.a)({},e.input),i=Object(k.a)(e,["meta","input"]);return r.a.createElement(M.a,Object.assign({error:!(!a||!n),helperText:a&&n},o,i,{fullWidth:!0}))},Z=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).login=function(e){a.props.userLogin(e,a.props.location.state?a.props.location.state.nextPathname:"/")},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.handleSubmit,n=e.isLoading,o=e.translate;return r.a.createElement("div",{className:t.main},r.a.createElement(L.a,{className:t.card},r.a.createElement("div",{className:t.avatar},r.a.createElement(P.a,{className:t.icon},r.a.createElement(H.a,null))),r.a.createElement("form",{onSubmit:a(this.login)},r.a.createElement("div",{className:t.hint},"Hint: demo / demo"),r.a.createElement("div",{className:t.form},r.a.createElement("div",{className:t.input},r.a.createElement(x.a,{autoFocus:!0,name:"email",component:Y,label:o("ra.auth.email"),disabled:n})),r.a.createElement("div",{className:t.input},r.a.createElement(x.a,{name:"password",component:Y,label:o("ra.auth.password"),type:"password",disabled:n}))),r.a.createElement(A.a,{className:t.actions},r.a.createElement(W.a,{variant:"raised",type:"submit",color:"primary",disabled:n,className:t.button,fullWidth:!0},n&&r.a.createElement(U.a,{size:25,thickness:2}),o("ra.auth.sign_in"))))),r.a.createElement(V.a,null))}}]),t}(n.Component),ee=C()(q.a,Object(S.a)({form:"signIn",validate:function(e,t){var a={},n=t.translate;return e.email||(a.email=n("ra.validation.required")),e.password||(a.password=n("ra.validation.required")),a}}),Object(c.b)(function(e){return{isLoading:e.admin.loading>0}},Object(j.a)({userLogin:$.h},G)),Object(z.withStyles)(function(e){return{main:{display:"flex",flexDirection:"column",minHeight:"100vh",alignItems:"center",justifyContent:"flex-start",background:"url(https://source.unsplash.com/random/1600x900)",backgroundRepeat:"no-repeat",backgroundSize:"cover"},card:{minWidth:300,marginTop:"6em"},avatar:{margin:"1em",display:"flex",justifyContent:"center"},icon:{backgroundColor:e.palette.secondary.main},hint:{marginTop:"1em",display:"flex",justifyContent:"center",color:e.palette.grey[500]},form:{padding:"0 1em 1em 1em"},input:{marginTop:"1em"},actions:{padding:"0 1em 1em 1em"}}}))(Z),te=function(e){return r.a.createElement(z.MuiThemeProvider,{theme:Object(z.createMuiTheme)(Q)},r.a.createElement(ee,e))},ae=a(18),ne=a(95),re=a(29),oe={palette:{secondary:{light:"#5f5fc4",main:"#283593",dark:"#001064",contrastText:"#fff"}}},ie=function(e){var t=e.meta,a=(t=void 0===t?{}:t).touched,n=t.error,o=Object(_.a)({},e.input),i=Object(k.a)(e,["meta","input"]);return r.a.createElement(M.a,Object.assign({error:!(!a||!n),helperText:a&&n},o,i,{fullWidth:!0}))},ce=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).login=function(e){var t=e.email,n=e.password,r=a.props,o=r.push,i=r.showNotification;fetch("http://localhost:3000/api/Users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:n})}).then(function(e){if(console.log(e),e.status>=400)throw new Error(e.statusText);i("ra.auth.sign_up_success"),o("/login")}).catch(function(e){console.log(e),i("ra.auth.sign_up_failure")})},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.handleSubmit,n=e.isLoading,o=e.translate;e.push,e.showNotification;return r.a.createElement("div",{className:t.main},r.a.createElement(L.a,{className:t.card},r.a.createElement("div",{className:t.avatar},r.a.createElement(P.a,{className:t.icon},r.a.createElement(H.a,null))),r.a.createElement("form",{onSubmit:a(this.login)},r.a.createElement("div",{className:t.hint},"Hint: demo / demo"),r.a.createElement("div",{className:t.form},r.a.createElement("div",{className:t.input},r.a.createElement(x.a,{autoFocus:!0,name:"email",component:ie,label:o("ra.auth.email"),disabled:n})),r.a.createElement("div",{className:t.input},r.a.createElement(x.a,{name:"password",component:ie,label:o("ra.auth.password"),type:"password",disabled:n})),r.a.createElement("div",{className:t.input},r.a.createElement(x.a,{name:"passRepeat",component:ie,label:o("ra.auth.passRepeat"),type:"password",disabled:n}))),r.a.createElement(A.a,{className:t.actions},r.a.createElement(W.a,{variant:"raised",type:"submit",color:"primary",disabled:n,className:t.button,fullWidth:!0},n&&r.a.createElement(U.a,{size:25,thickness:2}),o("ra.auth.sign_up"))))),r.a.createElement(V.a,null))}}]),t}(n.Component),se=C()(q.a,Object(S.a)({form:"signUp",validate:function(e,t){var a={},n=t.translate;return e.email||(a.email=n("ra.validation.required")),e.password!==e.passRepeat&&(a.password=n("ra.validation.passRepeat")),e.password||(a.password=n("ra.validation.required")),a}}),Object(c.b)(function(e){return{isLoading:e.admin.loading>0}},{userLogin:$.h,push:re.push,showNotification:ne.d}),Object(z.withStyles)(function(e){return{main:{display:"flex",flexDirection:"column",minHeight:"100vh",alignItems:"center",justifyContent:"flex-start",background:"url(https://source.unsplash.com/random/1600x900)",backgroundRepeat:"no-repeat",backgroundSize:"cover"},card:{minWidth:300,marginTop:"6em"},avatar:{margin:"1em",display:"flex",justifyContent:"center"},icon:{backgroundColor:e.palette.secondary.main},hint:{marginTop:"1em",display:"flex",justifyContent:"center",color:e.palette.grey[500]},form:{padding:"0 1em 1em 1em"},input:{marginTop:"1em"},actions:{padding:"0 1em 1em 1em"}}}))(ce),le=function(e){return r.a.createElement(z.MuiThemeProvider,{theme:Object(z.createMuiTheme)(oe)},r.a.createElement(se,e))},ue=function(){return r.a.createElement("div",null,"Unauthorized user!!")},me=[r.a.createElement(ae.d,{exact:!0,path:"/signup",component:le}),r.a.createElement(ae.d,{exact:!0,path:"/unauthorized",component:ue})],de=a(780),pe=a(4),he=a.n(pe),fe=a(255),ge=a.n(fe),be=a(72),ve=a.n(be),Ee=a(36),ye=a.n(Ee),Oe=a(28),we=a.n(Oe),je=a(256),ke=a.n(je),_e=a(86),xe=a.n(_e),Se=a(337),Ne=a(84),Ce=a.n(Ne),Te=a(252),Pe=a.n(Te),Ie=a(253),We=a.n(Ie),Re=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={auth:!0,anchorEl:null},a.handleChange=function(e,t){a.setState({auth:t})},a.handleMenu=function(e){a.setState({anchorEl:e.currentTarget})},a.handleClose=function(){a.setState({anchorEl:null})},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.children,o=t.label,i=t.icon,c=t.logout,s=t.translate;if(!c&&!a)return null;var l=this.state.anchorEl,u=Boolean(l);return r.a.createElement("div",null,r.a.createElement(Ce.a,{title:o&&s(o,{_:o})},r.a.createElement(ye.a,{"aria-label":o&&s(o,{_:o}),"aria-owns":u?"menu-appbar":null,"aria-haspopup":!0,color:"inherit",onClick:this.handleMenu},i)),r.a.createElement(Pe.a,{id:"menu-appbar",anchorEl:l,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},open:u,onClose:this.handleClose},n.Children.map(a,function(t){return Object(n.cloneElement)(t,{onClick:e.handleClose})}),c))}}]),t}(r.a.Component);Re.defaultProps={label:"ra.auth.user_menu",icon:r.a.createElement(We.a,null)};var Le=Object(q.a)(Re),Be=a(254),Ae=a.n(Be),Je={position:"fixed",zIndex:1300},Ue=function(e){var t=e.children;return r.a.createElement(Ae.a,{style:Je},t)},Fe=function(e){var t=e.children,a=e.classes,o=e.className,i=(e.logo,e.logout),c=e.open,s=(e.title,e.toggleSidebar),l=e.userMenu,u=e.width,m=e.userName,d=Object(k.a)(e,["children","classes","className","logo","logout","open","title","toggleSidebar","userMenu","width","userName"]);return r.a.createElement(Ue,null,r.a.createElement(ge.a,Object.assign({className:o,color:"secondary",position:"static"},d),r.a.createElement(ve.a,{disableGutters:!0,variant:"xs"===u?"regular":"dense",className:a.toolbar},r.a.createElement(ye.a,{color:"inherit","aria-label":"open drawer",onClick:s,className:he()(a.menuButton)},r.a.createElement(ke.a,{classes:{root:c?a.menuButtonIconOpen:a.menuButtonIconClosed}})),0===n.Children.count(t)?r.a.createElement(we.a,{variant:"title",color:"inherit",className:a.title,id:"react-admin-title"}):t,r.a.createElement("span",null,m),Object(n.cloneElement)(l,{logout:i}))))};Fe.defaultProps={userMenu:r.a.createElement(Le,null)};var Me=C()(Object(c.b)(function(e){return{locale:e.i18n.locale,userName:e.user}},{toggleSidebar:Se.f}),Object(z.withStyles)(function(e){return{toolbar:{paddingRight:24},menuButton:{marginLeft:"0.5em",marginRight:"0.5em"},menuButtonIconClosed:{transition:e.transitions.create(["transform"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),transform:"rotate(0deg)"},menuButtonIconOpen:{transition:e.transitions.create(["transform"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),transform:"rotate(180deg)"},title:{flex:1,textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}}),xe()())(Fe),ze=Object(ae.f)(function(e){var t;return console.log(e),t="/signup"===e.location.pathname?e.children:r.a.createElement(de.a,Object.assign({},e,{appBar:Me})),console.log(t),t}),De=a(764),He=a(387),Ve=a(361),qe=a(767),$e=a(765),Xe=a(705),Ke=a(777),Ge=a(768),Qe=a(709),Ye=a(787),Ze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"5c62a95563f1083a406b171c",t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;return"SET_WORDBOOK"===a?n.currentWordbook:e},et=(Object(X.a)("SET_WORDBOOK",function(e){return{currentWordbook:e}}),function(e){var t=e.setCurrentWordbook,a=Object(k.a)(e,["setCurrentWordbook"]);return console.log("setCurrentWordbook",a),r.a.createElement(De.b,a,r.a.createElement(He.a,{rowClick:function(e,n,r){return console.log(a.setWordbook),t(e),"edit"}},r.a.createElement(Ve.a,{source:"name"}),r.a.createElement(Ve.a,{source:"id"})))}),tt=function(e){return r.a.createElement(qe.b,e,r.a.createElement($e.a,null,r.a.createElement(Xe.a,{source:"name"}),r.a.createElement(Xe.a,{source:"id"})))},at={zIndex:2,display:"inline-block",float:"right"},nt=Object(E.c)(function(e){var t=e.basePath,a=e.data,n=e.resource,o=e.history;return r.a.createElement(A.a,{style:at},r.a.createElement(Ke.a,{basePath:t,record:a}),r.a.createElement(W.a,{color:"primary",onClick:function(){console.log(t,a,n,o),o.push("/wordsfrombooks/".concat(a.id,"/words"))}},"\u67e5\u770b\u5355\u8bcd\u8868"))}),rt=function(e){return r.a.createElement(Ge.b,Object.assign({actions:r.a.createElement(nt,null)},e),r.a.createElement(Qe.a,null,r.a.createElement(Ve.a,{source:"name"}),r.a.createElement(Ve.a,{source:"id"})))},ot=function(e){return r.a.createElement(Ye.a,e,r.a.createElement($e.a,null,r.a.createElement(Xe.a,{source:"name"}),r.a.createElement(Xe.a,{source:"id"})))},it=function(e){return r.a.createElement(Ye.a,e,r.a.createElement($e.a,null,r.a.createElement(Xe.a,{source:"spelling"}),r.a.createElement(Xe.a,{source:"id"})))},ct=a(430),st=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={hasError:!1},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidCatch",value:function(e,t){console.log(e,t)}},{key:"render",value:function(){return this.state.hasError?r.a.createElement("h1",null,"Something went wrong."):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),t}(r.a.Component),lt=a(135),ut=a(130),mt=a.n(ut);var dt=Object(z.withStyles)(function(e){var t;return{root:{display:"flex",flexWrap:"wrap",minWidth:300,width:"100%"},image:(t={position:"relative",height:200},Object(lt.a)(t,e.breakpoints.down("xs"),{width:"100% !important",height:100}),Object(lt.a)(t,"&:hover, &$focusVisible",{zIndex:1,"& $imageBackdrop":{opacity:.15},"& $imageMarked":{opacity:0},"& $imageTitle":{border:"4px solid currentColor"}}),t),focusVisible:{},imageButton:{position:"absolute",left:0,right:0,top:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",color:e.palette.common.white},imageSrc:{position:"absolute",left:0,right:0,top:0,bottom:0,backgroundColor:e.palette.common.white},imageBackdrop:{position:"absolute",left:0,right:0,top:0,bottom:0,backgroundColor:e.palette.common.black,opacity:.4,transition:e.transitions.create("opacity")},imageTitle:{position:"relative",padding:"".concat(2*e.spacing.unit,"px ").concat(4*e.spacing.unit,"px ").concat(e.spacing.unit+6,"px")},imageMarked:{height:3,width:18,backgroundColor:e.palette.common.white,position:"absolute",bottom:-2,left:"calc(50% - 9px)",transition:e.transitions.create("opacity")}}})(function(e){var t=e.classes,a=e.letters,n=e.userInput;return r.a.createElement("div",{className:t.root},a.map(function(e){return r.a.createElement(mt.a,{focusRipple:!0,key:e,className:t.image,focusVisibleClassName:t.focusVisible,onClick:function(){n(e)},style:{width:"50%"}},r.a.createElement("span",{className:t.imageSrc}),r.a.createElement("span",{className:t.imageBackdrop}),r.a.createElement("span",{className:t.imageButton},r.a.createElement(we.a,{component:"span",variant:"subtitle1",color:"inherit",className:t.imageTitle},e,r.a.createElement("span",{className:t.imageMarked}))))}))});function pt(e,t){var a=e.toLowerCase().charAt(0),n=a.charCodeAt(0);if(a<"a"||a>"z"||t<=0)throw new Error("params error in generateRandomCharArray");var r=[a],o=function(e,t,a){if(t<=e||a<=0)throw new Error("params error in generateNumsArray");for(var n=[];n.length<a;){var r=e+Math.floor((t-e+1)*Math.random());n.includes(r)||n.push(r)}return n}(1,25,t-1).map(function(e){return String.fromCharCode(e+n>122?e+n-26:e+n)});return r.concat(o).sort()}var ht=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={charIndex:0,userInput:[]},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"handleInput",value:function(e){var t=this.props,a=t.spelling,n=t.mode,r=t.onComplete;if("learning"!==n||e===a.charAt(this.state.charIndex))return this.setState(function(t){return{userInput:t.userInput.concat(e),charIndex:t.charIndex+1}}),this.state.userInput.length===a.length-1?setTimeout(function(){r()},1e3):void 0}},{key:"componentWillReceiveProps",value:function(){this.setState({charIndex:0,userInput:[]})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h2",null,this.props.spelling),r.a.createElement("h2",null,this.state.userInput.join("")+"_".repeat(this.props.spelling.length-this.state.userInput.length)),this.props.spelling.length>this.state.charIndex?r.a.createElement(dt,{letters:pt(this.props.spelling.charAt(this.state.charIndex),4),userInput:this.handleInput.bind(this)}):null)}}]),t}(n.Component);ht.defaultProps={spelling:"wtf"};var ft=ht,gt=a(429).a.div({inFromRight1:{opacity:1,x:0,transition:{x:function(e){return{type:"keyframes",values:[e.from,-1e3,1e3,e.to],times:[0,.5,.51,1],duration:1e3}},opacity:function(e){return{type:"keyframes",values:[e.from,0,0,e.to],times:[0,.5,.51,1],duration:1e3}}}},inFromRight2:{opacity:1,x:0,transition:{x:function(e){return{type:"keyframes",values:[e.from,-1e3,1e3,e.to],times:[0,.5,.51,1],duration:1e3}},opacity:function(e){return{type:"keyframes",values:[e.from,0,0,e.to],times:[0,.5,.51,1],duration:1e3}}}},inFromLeft1:{opacity:1,x:0,transition:{x:function(e){return{type:"keyframes",values:[e.from,1e3,-1e3,e.to],times:[0,.5,.51,1],duration:1e3}},opacity:function(e){return{type:"keyframes",values:[e.from,0,0,e.to],times:[0,.5,.51,1],duration:1e3}}}},inFromLeft2:{opacity:1,x:0,transition:{x:function(e){return{type:"keyframes",values:[e.from,1e3,-1e3,e.to],times:[0,.5,.51,1],duration:1e3}},opacity:function(e){return{type:"keyframes",values:[e.from,0,0,e.to],times:[0,.5,.51,1],duration:1e3}}}}}),bt=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={index:0,swipeToLeft:!0,myPose:"inFromRight1"},a.switchToL=function(){a.setState({swipeToLeft:!0,myPose:"inFromRight1"===a.state.myPose?"inFromRight2":"inFromRight1"})},a.switchToR=function(){a.setState({swipeToLeft:!1,myPose:"inFromLeft1"===a.state.myPose?"inFromLeft2":"inFromLeft1"})},a.handleToPrev=function(){var e=a.props;e.ids,e.data,e.basePath;a.setState(function(e){return e.index?{index:e.index-1}:e}),a.switchToR()},a.handleToNext=function(){var e=a.props,t=e.ids;e.data,e.basePath;a.setState(function(e){return e.index<t.length-1?{index:e.index+1}:e}),a.switchToL()},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.ids,a=e.data,n=(e.basePath,e.location);e.hisotry;return console.log(t,"data",a,n),t.length&&Object(ct.a)(a[t[this.state.index]].spelling).forEach(function(e){return console.log(pt(e,4))}),r.a.createElement(st,null,r.a.createElement("div",null,r.a.createElement("button",{onClick:this.handleToPrev},"prev"),r.a.createElement("button",{onClick:this.handleToNext},"next"),r.a.createElement(gt,{pose:this.state.myPose},t.length?r.a.createElement(ft,{key:this.state.index,mode:"learning",spelling:a[t[this.state.index]].spelling,onComplete:this.handleToNext}):null)))}}]),t}(n.Component),vt=Object(E.c)(bt),Et=function(e){return r.a.createElement(De.b,Object.assign({},e,{perPage:5}),r.a.createElement(vt,null))},yt=function(e){return function(t,a,n){var r=a.split("/");return r.length>0&&["wordsfrombooks","testsfrombooks"].includes(r[0].toLowerCase())?(r[0]="Wordbooks",e(t,r.join("/"),n)):e(t,a,n)}},Ot=a(77),wt=function(e,t,a){if("undefined"===typeof Storage)return!1;var n=1e3*a,r={value:t,timestamp:(new Date).getTime()+n};return localStorage.setItem(e,JSON.stringify(r)),t},jt=function(e){if("undefined"===typeof Storage)return!1;try{var t=JSON.parse(localStorage.getItem(e));return!!t&&((new Date).getTime()<t.timestamp&&t.value)}catch(a){return!1}},kt=function(e){if("undefined"===typeof Storage)return!1;localStorage.removeItem(e)},_t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.user={authenticated:!0,token:jt("lbtoken").id},s.a.fetchJson(e,t)},xt=a(43),St=a(315),Nt=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/login";return function(t,n){if(t===St.d){var r=new Request(e,{method:"POST",body:JSON.stringify(n),headers:new Headers({"Content-Type":"application/json"})});return fetch(r).then(function(e){if(e.status<200||e.status>=300)throw new Error(e.statusText);return e.json()}).then(function(e){var t=e.ttl,a=Object(k.a)(e,["ttl"]),r=n.username||n.email;a.username=r,wt("lbtoken",a,t)})}if(t===St.e)return kt("lbtoken"),Promise.resolve();if(t===St.b){n.status;return Promise.resolve()}if(t===St.a){var o=jt("lbtoken");return o&&o.id&&o.username?Promise.resolve(o.username):(kt("lbtoken"),Promise.reject({redirectTo:a}))}return Promise.reject("Unkown method")}},Ct=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_t;return function(a,n,r){if(a===xt.i)return Promise.all(r.ids.map(function(a){return t("".concat(e,"/").concat(n,"/").concat(a),{method:"PUT",body:JSON.stringify(r.data)})})).then(function(e){return{data:e.map(function(e){return e.json})}});if(a===xt.c)return Promise.all(r.ids.map(function(a){return t("".concat(e,"/").concat(n,"/").concat(a),{method:"DELETE"})})).then(function(e){return{data:e.map(function(e){return e.json})}});var o=function(t,a,n){var r="",o={};switch(t){case xt.d:var i=n.pagination,c=i.page,s=i.perPage,l=n.sort,u=l.field,m=l.order,d=n.include,p={};p.where=Object(j.a)({},n.filter),u&&(p.order=[u+" "+m]),s>0&&(p.limit=s,c>=0&&(p.offset=(c-1)*s)),d&&(p.include=d),r="".concat(e,"/").concat(a,"?").concat(Object(Ot.stringify)({filter:JSON.stringify(p)}));break;case xt.g:r="".concat(e,"/").concat(a,"/").concat(n.id);break;case xt.e:var h={where:{or:n.ids.map(function(e){return{id:e}})}};r="".concat(e,"/").concat(a,"?").concat(Object(Ot.stringify)({filter:JSON.stringify(h)}));break;case xt.f:var f=n.pagination,g=f.page,b=f.perPage,v=n.sort,E=v.field,y=v.order,O=n.include,w={};w.where=Object(j.a)({},n.filter),w.where[n.target]=n.id,E&&(w.order=[E+" "+y]),b>0&&(w.limit=b,g>=0&&(w.skip=(g-1)*b)),O&&(w.include=O),r="".concat(e,"/").concat(a,"?").concat(Object(Ot.stringify)({filter:JSON.stringify(w)}));break;case xt.h:r="".concat(e,"/").concat(a,"/").concat(n.id),o.method="PUT",o.body=JSON.stringify(n.data);break;case xt.a:r="".concat(e,"/").concat(a),o.method="POST",o.body=JSON.stringify(n.data);break;case xt.b:r="".concat(e,"/").concat(a,"/").concat(n.id),o.method="DELETE";break;default:throw new Error("Unsupported fetch action type ".concat(t))}return{url:r,options:o}}(a,n,r),i=o.url,c=o.options;return t(i,c).then(function(e){return function(e,t,a,n){var r=e.headers,o=e.json;switch(t){case xt.d:case xt.f:if(!r.has("content-range"))throw new Error("The Content-Range header is missing in the HTTP Response. The simple REST data provider expects responses for lists of resources to contain this header with the total number of results to build the pagination. If you are using CORS, did you declare Content-Range in the Access-Control-Expose-Headers header?");return{data:o,total:parseInt(r.get("content-range").split("/").pop(),10)};case xt.a:return{data:Object(j.a)({},n.data,{id:o.id})};case xt.b:return{data:Object(j.a)({},o,{id:n.id})};default:return{data:o}}}(e,a,0,r)})}},Tt=a(153),Pt=a.n(Tt),It=a(136),Wt=a.n(It),Rt=a(6),Lt=Wt.a.mark(Bt);function Bt(){return Wt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Rt.j)($.a,Wt.a.mark(function e(){var t;return Wt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=JSON.parse(localStorage.getItem("lbtoken")).value,e.next=3,Object(Rt.f)(G.setUser(t&&t.username?t.username:"unknown user"));case 3:case"end":return e.stop()}},e,this)}));case 2:case"end":return e.stop()}},Lt,this)}var At,Jt,Ut={ra:{action:Object(lt.a)({delete:"\u5220\u9664",show:"\u67e5\u770b",list:"\u5217\u8868",save:"\u4fdd\u5b58",create:"\u65b0\u5efa",edit:"\u7f16\u8f91",sort:"\u6392\u5e8f",cancel:"\u53d6\u6d88",undo:"\u64a4\u9500",refresh:"\u5237\u65b0",add:"\u589e\u52a0",remove:"\u5220\u9664",add_filter:"\u589e\u52a0\u68c0\u7d22",remove_filter:"\u79fb\u9664\u68c0\u7d22",back:"\u56de\u9000",bulk_actions:"\u9009\u4e2d%{smart_count}\u9879",export:"\u5bfc\u51fa",search:"\u68c0\u7d22"},"show","\u663e\u793a"),boolean:{true:"\u662f",false:"\u5426"},page:{list:"%{name} \u5217\u8868",edit:"%{name} #%{id}",show:"%{name} #%{id}",create:"\u65b0\u5efa %{name}",dashboard:"\u6982\u89c8",not_found:"\u672a\u53d1\u73b0",loading:"\u52a0\u8f7d\u4e2d",error:"\u51fa\u73b0\u9519\u8bef"},input:{file:{upload_several:"\u5c06\u6587\u4ef6\u96c6\u5408\u62d6\u62fd\u5230\u8fd9\u91cc, \u6216\u70b9\u51fb\u8fd9\u91cc\u9009\u62e9\u6587\u4ef6\u96c6\u5408.",upload_single:"\u5c06\u6587\u4ef6\u62d6\u62fd\u5230\u8fd9\u91cc, \u6216\u70b9\u51fb\u8fd9\u91cc\u9009\u62e9\u6587\u4ef6."},image:{upload_several:"\u5c06\u56fe\u7247\u6587\u4ef6\u96c6\u5408\u62d6\u62fd\u5230\u8fd9\u91cc, \u6216\u70b9\u51fb\u8fd9\u91cc\u9009\u62e9\u56fe\u7247\u6587\u4ef6\u96c6\u5408.",upload_single:"\u5c06\u56fe\u7247\u6587\u4ef6\u62d6\u62fd\u5230\u8fd9\u91cc, \u6216\u70b9\u51fb\u8fd9\u91cc\u9009\u62e9\u56fe\u7247\u6587\u4ef6."},references:{all_missing:"\u672a\u627e\u5230\u53c2\u8003\u6570\u636e.",many_missing:"\u81f3\u5c11\u6709\u4e00\u6761\u53c2\u8003\u6570\u636e\u4e0d\u518d\u53ef\u7528.",single_missing:"\u5173\u8054\u7684\u53c2\u8003\u6570\u636e\u4e0d\u518d\u53ef\u7528."}},message:{yes:"\u662f",no:"\u5426",are_you_sure:"\u60a8\u786e\u5b9a\u64cd\u4f5c?",about:"\u5173\u4e8e",not_found:"\u60a8\u8f93\u5165\u4e86\u9519\u8bef\u7684URL\u6216\u8005\u9519\u8bef\u7684\u94fe\u63a5.",loading:"\u6b63\u5728\u52a0\u8f7d\u9875\u9762, \u8bf7\u7a0d\u5019",invalid_form:"\u8868\u5355\u8f93\u5165\u65e0\u6548. \u8bf7\u68c0\u67e5\u9519\u8bef\u63d0\u793a",delete_title:"\u5220\u9664 %{name} #%{id}",delete_content:"\u60a8\u786e\u5b9a\u8981\u5220\u9664\u8be5\u6761\u76ee?",bulk_delete_title:"\u5220\u9664 %{name} |||| \u5220\u9664 %{smart_count}\u9879 %{name} ",bulk_delete_content:"\u60a8\u786e\u5b9a\u8981\u5220\u9664 %{name}? |||| \u60a8\u786e\u5b9a\u8981\u5220\u9664 %{smart_count} \u9879?"},navigation:{no_results:"\u7ed3\u679c\u4e3a\u7a7a",no_more_results:"\u9875\u7801 %{page} \u8d85\u51fa\u8fb9\u754c. \u8bd5\u8bd5\u4e0a\u4e00\u9875.",page_out_of_boundaries:"\u9875\u7801 %{page} \u8d85\u51fa\u8fb9\u754c",page_out_from_end:"\u5df2\u5230\u6700\u672b\u9875",page_out_from_begin:"\u5df2\u5230\u6700\u524d\u9875",page_range_info:"%{offsetBegin}-%{offsetEnd} / %{total}",page_rows_per_page:"\u6bcf\u9875\u884c\u6570:",next:"\u5411\u540e",prev:"\u5411\u524d"},auth:{user_menu:"\u8bbe\u7f6e",username:"\u7528\u6237\u540d",email:"\u90ae\u7bb1",password:"\u5bc6\u7801",passRepeat:"\u518d\u6b21\u786e\u8ba4\u5bc6\u7801",sign_in:"\u767b\u5f55",sign_up:"\u6ce8\u518c",sign_up_success:"\u6ce8\u518c\u6210\u529f,\u8bf7\u767b\u5f55",sign_up_failure:"\u6ce8\u518c\u5931\u8d25,\u8bf7\u91cd\u8bd5",sign_in_error:"\u9a8c\u8bc1\u5931\u8d25, \u8bf7\u91cd\u8bd5",logout:"\u9000\u51fa"},notification:Object(lt.a)({updated:"\u6761\u76ee\u5df2\u66f4\u65b0 |||| %{smart_count} \u9879\u6761\u76ee\u5df2\u66f4\u65b0",created:"\u6761\u76ee\u5df2\u65b0\u5efa",deleted:"\u6761\u76ee\u5df2\u5220\u9664 |||| %{smart_count} \u9879\u6761\u76ee\u5df2\u5220\u9664",bad_item:"\u4e0d\u6b63\u786e\u7684\u6761\u76ee",item_doesnt_exist:"\u6761\u76ee\u4e0d\u5b58\u5728",http_error:"\u4e0e\u670d\u52a1\u901a\u4fe1\u51fa\u9519",canceled:"\u53d6\u6d88\u52a8\u4f5c",data_provider_error:"dataProvider\u9519\u8bef. \u8bf7\u68c0\u67e5console\u7684\u8be6\u7ec6\u4fe1\u606f."},"canceled","\u53d6\u6d88\u52a8\u4f5c"),validation:{required:"\u5fc5\u586b",minLength:"\u5fc5\u987b\u4e0d\u5c11\u4e8e %{min} \u4e2a\u5b57\u7b26",maxLength:"\u5fc5\u987b\u4e0d\u591a\u4e8e %{max} \u4e2a\u5b57\u7b26",minValue:"\u5fc5\u987b\u4e0d\u5c0f\u4e8e %{min}",maxValue:"\u5fc5\u987b\u4e0d\u5927\u4e8e %{max}",number:"\u5fc5\u987b\u4e3a\u6570\u5b57",email:"\u5fc5\u987b\u662f\u6709\u6548\u7684\u90ae\u7bb1",passRepeat:"\u5bc6\u7801\u4e24\u6b21\u8f93\u5165\u4e0d\u4e00\u81f4",oneOf:"\u5fc5\u987b\u4e3a: %{options}\u5176\u4e2d\u4e00\u9879",regex:"\u5fc5\u987b\u7b26\u5408\u6307\u5b9a\u7684\u683c\u5f0f (regexp): %{pattern}"}}},Ft=a(19),Mt=a(390),zt=a(170),Dt=a(419),Ht=a.n(Dt),Vt=a(376),qt=a(138),$t=a(766),Xt=a(782),Kt={cn:Ut},Gt=(Object(Ft.c)({admin:qt.a,i18n:Object($t.a)("cn",(At="cn","en"!==At?Kt[At]:w.a)),form:Mt.a,router:re.routerReducer,user:K,currentWordbook:Ze}),function(e){var t=e.authProvider,a=e.dataProvider,n=e.i18nProvider,r=void 0===n?Vt.a:n,o=e.history,i=e.locale,c=void 0===i?"en":i,s=Object(Ft.c)({admin:qt.a,i18n:Object($t.a)(c,r(c)),form:Mt.a,router:re.routerReducer,user:K,currentWordbook:Ze}),l=Wt.a.mark(function e(){return Wt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Rt.a)([Object(Xt.a)(a,t,r),Bt].map(Rt.e));case 2:case"end":return e.stop()}},e,this)}),u=Object(zt.a)(),m=Object(Ft.e)(function(e,t){return s(t.type!==$.f?e:void 0,t)},{},Object(Ft.d)(Object(Ft.a)(u,Ht.a,Object(re.routerMiddleware)(o)),"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__():function(e){return e}));return u.run(l),m}),Qt=a(428),Yt=Pt()({basename:"/"}),Zt={cn:Ut},ea=function(e){return"en"!==e?Zt[e]:w.a},ta=yt(Ct(Jt="/api",function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.headers||(t.headers=new Headers({Accept:"application/json"}));var a=JSON.parse(localStorage.getItem("lbtoken"));return a&&a.value&&a.value.id&&t.headers.set("Authorization"," ".concat(a.value.id)),s.a.fetchJson(e,t)})),aa=Nt("".concat(Jt,"/Users/login"),Yt),na=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={currentWordbook:""},a.setCurrentWordbook=function(e){a.setState({currentWordbook:e})},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){console.log("app this.setcurrentwordbook",this.setCurrentWordbook);var e,t=(e=this.setCurrentWordbook,function(t){return r.a.createElement(et,Object.assign({},t,{setCurrentWordbook:e}))});return r.a.createElement(c.a,{store:Gt({authProvider:aa,dataProvider:ta,i18nProvider:ea,history:Yt,locale:"cn"})},r.a.createElement(h.a,{loginPage:te,history:Yt,appLayout:ze,customRoutes:me,authProvider:aa},r.a.createElement(f.a,{name:"Wordbooks",list:t,show:rt,edit:tt,create:ot}),r.a.createElement(f.a,{name:"WordsFromBooks/".concat(this.state.currentWordbook,"/words"),list:g.a,show:b.a,edit:v.a,create:it}),r.a.createElement(f.a,{name:"testsfrombooks/".concat(this.state.currentWordbook,"/words"),list:Et})))}}]),t}(n.Component),ra=Object(Qt.hot)(na);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var oa,ia=Pt()({basename:"/"}),ca={cn:Ut};oa="/api";var sa=yt(Ct("API_URL",function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.headers||(t.headers=new Headers({Accept:"application/json"}));var a=JSON.parse(localStorage.getItem("lbtoken"));return a&&a.value&&a.value.id&&t.headers.set("Authorization"," ".concat(a.value.id)),s.a.fetchJson(e,t)})),la=Nt("".concat(oa,"/Users/login"),ia);Gt({authProvider:la,dataProvider:sa,i18nProvider:function(e){return"en"!==e?ca[e]:w.a},history:ia,locale:"cn"});i.a.render(r.a.createElement(ra,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[434,2,1]]]);
//# sourceMappingURL=main.6cc4a4f7.chunk.js.map